if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());if(!Date.now){Date.now=function now(){return new Date().getTime()}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){if(this==null){throw new TypeError()}var d=Object(this);var a=d.length>>>0;if(a===0){return -1}var f=0;if(arguments.length>0){f=Number(arguments[1]);if(f!=f){f=0}else{if(f!=0&&f!=Infinity&&f!=-Infinity){f=(f>0||-1)*Math.floor(Math.abs(f))}}}if(f>=a){return -1}var b=f>=0?f:Math.max(a-Math.abs(f),0);for(;b<a;b++){if(b in d&&d[b]===c){return b}}return -1}}if(!Array.prototype.forEach){Array.prototype.forEach=function(d,c){for(var b=0,a=this.length;b<a;++b){d.call(c||this,this[b],b,this)}}}if(!Array.prototype.map){Array.prototype.map=function(l,j){var b,a,c;if(this==null){throw new TypeError(" this is null or not defined")}var f=Object(this);var g=f.length>>>0;if({}.toString.call(l)!="[object Function]"){throw new TypeError(l+" is not a function")}if(j){b=j}a=new Array(g);c=0;while(c<g){var d,h;if(c in f){d=f[c];h=l.call(b,d,c,f);a[c]=h}c++}return a}}if(!Array.prototype.some){Array.prototype.some=function(b){if(this==null){throw new TypeError()}var f,d,c=Object(this),a=c.length>>>0;if(typeof b!=="function"){throw new TypeError()}f=arguments[1];for(d=0;d<a;d++){if(d in c&&b.call(f,c[d],d,c)){return true}}return false}}if(!Date.prototype.toISOString){(function(){function a(c){var b=String(c);if(b.length===1){b="0"+b}return b}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}())}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!Array.isArray){Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}}if(!Object.keys){Object.keys=(function(){var c=Object.prototype.hasOwnProperty,d=!({toString:null}).propertyIsEnumerable("toString"),b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=b.length;return function(h){if(typeof h!=="object"&&(typeof h!=="function"||h===null)){throw new TypeError("Object.keys called on non-object")}var f=[],j,g;for(j in h){if(c.call(h,j)){f.push(j)}}if(d){for(g=0;g<a;g++){if(c.call(h,b[g])){f.push(b[g])}}}return f}}())}(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(j,f){var d=new Date().getTime();var g=Math.max(0,16-(d-b));var h=window.setTimeout(function(){j(d+g)},g);b=d+g;return h}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());(function(b,d){var c=b.parse,a=[1,4,5,6,7,10,11];b.parse=function(g){var l,m,j=0;if((m=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(g))){for(var h=0,f;(f=a[h]);++h){m[f]=+m[f]||0}m[2]=(+m[2]||1)-1;m[3]=+m[3]||1;if(m[8]!=="Z"&&m[9]!==d){j=m[10]*60+m[11];if(m[9]==="+"){j=0-j}}l=b.UTC(m[1],m[2],m[3],m[4],m[5]+j,m[6],m[7])}else{l=c?c(g):NaN}return l}}(Date));var BrowserCompt={uaMatch:function(b){b=b.toLowerCase();var a=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||b.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[];return{browser:a[1]||"",version:a[2]||"0"}},browser:function(){var a=BrowserCompt.uaMatch(navigator.userAgent);browser={};if(a.browser){browser[a.browser]=true;browser.version=a.version}if(browser.chrome){browser.webkit=true}else{if(browser.webkit){browser.safari=true}}return browser},placeholder_visible_at_focus:function(){var a=BrowserCompt.browser;if(a.chrome||(a.mozilla&&(a.version*1)>17)||(a.safari&&(a.version.split(".",1)*1)>534)){return true}return false}};BrowserCompt.browser=BrowserCompt.browser();BrowserCompt.placeholder_visible_at_focus=BrowserCompt.placeholder_visible_at_focus();if(!window.AJS){var AJS={BASE_URL:"",ajaxErrorHandler:null,getQueryArgument:function(f){var b=window.location.search.substring(1);var c=b.split("&");for(var a=0;a<c.length;a++){var d=c[a].split("=");if(d[0]==f){return d[1]}}return null},_agent:navigator.userAgent.toLowerCase(),_agent_version:navigator.productSub,isIe:function(){return(AJS._agent.indexOf("msie")!=-1&&AJS._agent.indexOf("opera")==-1)},isIe8:function(){return AJS._agent.indexOf("msie 8")!=-1},isSafari:function(a){if(a){return AJS._agent.indexOf("khtml")!=-1}return(AJS._agent.indexOf("khtml")!=-1&&AJS._agent.match(/3\.\d\.\d safari/)==null)},isOpera:function(){return AJS._agent.indexOf("opera")!=-1},isMozilla:function(){return(AJS._agent.indexOf("gecko")!=-1&&AJS._agent_version>=20030210)},isMac:function(){return(AJS._agent.indexOf("macintosh")!=-1)},isCamino:function(){return(AJS._agent.indexOf("camino")!=-1)},createArray:function(a){if(AJS.isArray(a)&&!AJS.isString(a)){return a}else{if(!a){return[]}else{return[a]}}},arrayRemove:function(a,c){var b=AJS.getIndex(c,a);if(b!=-1){a.splice(b,1)}return a},arrayUpdate:function(a,d,b){var c=AJS.getIndex(d,a);if(c!=-1){a.splice(c,1,b)}return a},forceArray:function(a){if(AJS.isArray(a)){return a}var c=[];for(var b=0;b<a.length;b++){c.push(a[b])}return c},join:function(d,b){try{return b.join(d)}catch(c){var a=b[0]||"";AJS.map(b,function(f){a+=d+f},1);return a+""}},isIn:function(c,b){var a=AJS.getIndex(c,b);if(a!=-1){return true}else{return false}},getIndex:function(d,b,c){for(var a=0;a<b.length;a++){if(c&&c(b[a])||d==b[a]){return a}}return -1},getFirst:function(a){if(a.length>0){return a[0]}else{return null}},getLast:function(a){if(a.length>0){return a[a.length-1]}else{return null}},getRandom:function(a){return a[Math.floor(Math.random()*a.length)]},update:function(b,a){for(var c in a){b[c]=a[c]}return b},flattenList:function(h){var d=true;AJS.map(h,function(l){if(l&&AJS.isArray(l)){d=false;return true}});if(d){return h}var g=false;var a=[];for(var b=0;b<h.length;b++){var j=h[b];if(AJS.isArray(j)){g=true;break}if(j!=null){a.push(j)}}if(!g){return a}var c=[];var f=function(o,m){AJS.map(m,function(l){if(l==null){}else{if(AJS.isArray(l)){f(o,l)}else{o.push(l)}}})};f(c,h);return c},flattenElmArguments:function(a){return AJS.flattenList(AJS.forceArray(a))},map:function(g,f,b,d){var c=0,a=g.length;if(b){c=b}if(d){a=d}for(c;c<a;c++){var h=f(g[c],c);if(h!=undefined){return h}}},rmap:function(d,c){var b=d.length-1,a=0;for(b;b>=a;b--){var f=c.apply(null,[d[b],b]);if(f!=undefined){return f}}},filter:function(f,c,a,b){var d=[];AJS.map(f,function(g){if(c(g)){d.push(g)}},a,b);return d},partial:function(b){var a=AJS.$FA(arguments);a.shift();return function(){var c=[];c=c.concat(a);c=c.concat(AJS.$FA(arguments));return b.apply(this||window,c)}},getElement:function(a){if(AJS.isString(a)||AJS.isNumber(a)){return document.getElementById(a)}else{return a}},getElements:function(){var a=AJS.flattenElmArguments(arguments);var d=new Array();for(var c=0;c<a.length;c++){var b=AJS.getElement(a[c]);d.push(b)}return d},getElementsByTagAndClassName:function(a,b,o,h){var g=[];if(!AJS.isDefined(o)){o=document}if(!AJS.isDefined(a)){a="*"}var f,d;if(b&&document.getElementsByClassName){var c=o.getElementsByClassName(b);if(a=="*"){g=AJS.forceArray(c)}else{var m=c.length;for(f=0;f<m;f++){if(c[f].nodeName.toLowerCase()==a){g.push(c[f])}}}}else{var c=o.getElementsByTagName(a);if(!b){g=AJS.forceArray(c)}else{var m=c.length;var l=new RegExp("(^|\\s)"+b+"(\\s|$)");for(f=0;f<m;f++){if(l.test(c[f].className)||!b){g.push(c[f])}}}}if(h){return g[0]}else{return g}},getNodeName:function(a){return a.nodeName.toLowerCase()},_nodeWalk:function(g,d,b,f){var c=f(g);var a;if(d&&b){a=function(h){return AJS.getNodeName(h)==d&&AJS.hasClass(h,b)}}else{if(d){a=function(h){return AJS.getNodeName(h)==d}}else{a=function(h){return AJS.hasClass(h,b)}}}if(a(g)){return g}while(c){if(a(c)){return c}c=f(c)}return null},getParentBytc:function(f,d,c,a){var b=AJS._parseTagClassName(d,c);d=b[0];c=b[1];return AJS._nodeWalk(f,d,c,function(g){if(g==a){return null}if(g){return g.parentNode}})},getChildBytc:function(f,d,c){var b=AJS._parseTagClassName(d,c);d=b[0];c=b[1];var a=AJS.$bytc(d,c,f);if(a.length>0){return a[0]}else{return null}},hasParent:function(c,b,a){if(c==b){return true}if(a==0){return false}return AJS.hasParent(c.parentNode,b,a-1)},getPreviousSiblingBytc:function(d,c,b){var a=AJS._parseTagClassName(c,b);c=a[0];b=a[1];return AJS._nodeWalk(d,c,b,function(f){return f.previousSibling})},getNextSiblingBytc:function(d,c,b){var a=AJS._parseTagClassName(c,b);c=a[0];b=a[1];return AJS._nodeWalk(d,c,b,function(f){return f.nextSibling})},getBody:function(){return AJS.$bytc("body")[0]},getFormElement:function(c,a){c=AJS.$(c);var b=null;AJS.map(c.elements,function(d){if(d.name&&d.name==a){b=d}});if(b){return b}AJS.map(AJS.$bytc("select",null,c),function(d){if(d.name&&d.name==a){b=d}});return b},getSelectValue:function(a){var a=AJS.$(a);if(!a){return null}return a.options[a.selectedIndex].value},documentInsert:function(a){if(typeof(a)=="string"){a=AJS.HTML2DOM(a)}document.write('<span id="dummy_holder"></span>');AJS.swapDOM(AJS.$("dummy_holder"),a)},appendChildNodes:function(b){var a=AJS.flattenElmArguments(arguments);if(a.length>=2){AJS.map(a,function(c){if(AJS.isString(c)){c=AJS.TN(c)}if(AJS.isDefined(c)){b.appendChild(c)}},1)}return b},appendToTop:function(d){var b=AJS.flattenElmArguments(arguments).slice(1);if(b.length>=1){var c=d.firstChild;if(c){while(true){var a=b.shift();if(a){AJS.insertBefore(a,c)}else{break}}}else{AJS.ACN.apply(null,arguments)}}return d},replaceChildNodes:function(b){var a;if(!b){return false}while((a=b.firstChild)){AJS.swapDOM(a,null)}if(arguments.length<2){return b}else{return AJS.appendChildNodes.apply(null,arguments)}return b},insertAfter:function(b,a){a.parentNode.insertBefore(b,a.nextSibling);return b},insertBefore:function(b,a){a.parentNode.insertBefore(b,a);return b},cleanData:function(a){if(a&&a.nodeType==1){if(a.reuseable){return true}ElementStore.remove(a);AJS.map(AJS.$FA(a.getElementsByTagName("*")),function(b){if(b&&!b.reuseable){ElementStore.remove(b)}})}},swapDOM:function(a,c){a=AJS.$(a);AJS.cleanData(a);var b=a.parentNode;if(b){if(c){c=AJS.getElement(c);b.replaceChild(c,a)}else{b.removeChild(a)}}else{delete a;delete c;return false}return c},removeElement:function(){var a=AJS.flattenElmArguments(arguments);try{AJS.map(a,function(c){if(AJS.$(c)){AJS.swapDOM(c,null)}})}catch(b){}},createDOM:function(f,d){d=AJS.flattenElmArguments(d);var h=document.createElement(f);var b=d[0];if(AJS.isDict(b)){for(k in b){a=b[k];if(k=="style"||k=="s"){h.style.cssText=a}else{if(k=="c"||k=="class"||k=="className"){h.className=a}else{if(k=="reuseable"){h.reuseable=true}else{h.setAttribute(k,a)}}}}d.shift()}for(var c=0;c<d.length;c++){var a=d[c];if(a){var g=typeof(a);if(g=="string"||g=="number"){a=AJS.TN(a)}h.appendChild(a)}}return h},_createDomShortcuts:function(){var b=["ul","li","td","tr","th","tbody","table","input","span","b","a","div","img","button","h1","h2","h3","h4","h5","h6","br","textarea","form","p","select","option","optgroup","iframe","script","center","dl","dt","dd","small","pre","i","label","thead","hr"];var a=function(c){AJS[c.toUpperCase()]=function(){return AJS.createDOM.apply(null,[c,arguments])}};AJS.map(b,a);AJS.TN=function(c){return document.createTextNode(c)}},setHTML:function(){var a=AJS.flattenElmArguments(arguments);var b=a.pop();AJS.map(a,function(c){if(c){c.innerHTML=b}});return a[0]},setVisibility:function(){var a=AJS.flattenElmArguments(arguments);var b=a.pop()&&"visible"||"hidden";AJS.setStyle(a,"visibility",b)},showElement:function(){AJS.setStyle(AJS.flattenElmArguments(arguments),"display","")},hideElement:function(a){AJS.setStyle(AJS.flattenElmArguments(arguments),"display","none")},isElementHidden:function(a){return((a.style.display=="none")||(a.style.visibility=="hidden"))},isElementShown:function(a){return !AJS.isElementHidden(a)},setStyle:function(){var b=AJS.flattenElmArguments(arguments);var d=b.pop();var a=["top","left","right","width","height"];if(AJS.isObject(d)){AJS.map(b,function(f){AJS.map(AJS.keys(d),function(h){var g=d[h];if(AJS.isIn(h,a)){g=AJS.isString(g)&&g||g+"px"}f.style[h]=g})})}else{var c=b.pop();AJS.map(b,function(f){if(AJS.isIn(c,a)){d=AJS.isString(d)&&d||d+"px"}f.style[c]=d})}},__cssDim:function(a,b){var a=AJS.$FA(a);a.splice(a.length-1,0,b);AJS.setStyle.apply(null,a)},setWidth:function(){return AJS.__cssDim(arguments,"width")},setHeight:function(){return AJS.__cssDim(arguments,"height")},setLeft:function(){return AJS.__cssDim(arguments,"left")},setRight:function(){return AJS.__cssDim(arguments,"right")},setTop:function(){return AJS.__cssDim(arguments,"top")},setClass:function(){var a=AJS.flattenElmArguments(arguments);var b=a.pop();AJS.map(a,function(c){c.className=b})},addClass:function(){var b=AJS.flattenElmArguments(arguments);var a=b.pop();var c=function(d){if(d){if(!new RegExp("(^|\\s)"+a+"(\\s|$)").test(d.className)){d.className+=(d.className?" ":"")+a}}};AJS.map(b,function(d){c(d)})},hasClass:function(c,a){if(!c||!c.className){return false}var b=c.className;return(b.length>0&&(b==a||new RegExp("(^|\\s)"+a+"(\\s|$)").test(b)))},removeClass:function(){var c=AJS.flattenElmArguments(arguments);var a=c.pop();var b=function(d){if(d){d.className=d.className.replace(new RegExp("(^|\\s)"+a,"g"),"")}};AJS.map(c,function(d){b(d)})},setOpacity:function(b,a){if(a==1){b.style.opacity=1;b.style.filter=""}else{b.style.opacity=a;b.style.filter="alpha(opacity="+a*100+")"}},HTML2DOM:function(a,c){var b=AJS.DIV();b.innerHTML=a;if(c){return b.childNodes[0]}else{return b}},preloadImages:function(){AJS.AEV(window,"load",AJS.$p(function(a){AJS.map(a,function(c){var b=new Image();b.src=c})},arguments))},RND:function(a,d,c){c=c||window;var b=function(f,l){l=l.split("|");var j=d[l[0]];for(var h=1;h<l.length;h++){j=c[l[h]](j)}if(j==""){return""}if(j==0||j==-1){j+=""}return j||f};return a.replace(/%\(([A-Za-z0-9_|.]*)\)/g,b)},_parseTagClassName:function(c,b){if(c&&c.indexOf(".")!=-1){var a=c.split(".");c=AJS.strip(a[0]);b=AJS.strip(a[1])}return[c,b||null]},getXMLHttpRequest:function(){var b=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.4.0")},function(){throw"Browser does not support XMLHttpRequest"}];for(var a=0;a<b.length;a++){var c=b[a];try{return c()}catch(d){AJS.log(d)}}},getRequest:function(a,c){var b=AJS.getXMLHttpRequest();if(a.match(/^https?:\/\//)==null){if(AJS.BASE_URL!=""){if(AJS.BASE_URL.lastIndexOf("/")!=AJS.BASE_URL.length-1){AJS.BASE_URL+="/"}a=AJS.BASE_URL+a}}a=a.replace(/([^:])\/\//g,"$1/").replace(/^\/\//,"/");if(!c){c="POST"}return new AJSDeferred(b,c,a)},serializeJSON:function(j){if(window.JSON&&window.JSON.stringify){return window.JSON.stringify(j)}var a=typeof(j);if(a=="undefined"){return"null"}else{if(a=="number"||a=="boolean"){return j+""}else{if(j===null){return"null"}}}if(a=="string"){return AJS._reprString(j)}if(a=="object"&&j.getFullYear){return AJS._reprDate(j)}var f=arguments.callee;if(a!="function"&&typeof(j.length)=="number"){var d=[];for(var c=0;c<j.length;c++){var h=f(j[c]);if(typeof(h)!="string"){h="undefined"}d.push(h)}return"["+d.join(",")+"]"}if(a=="function"){return null}d=[];for(var b in j){var g;if(typeof(b)=="number"){g='"'+b+'"'}else{if(typeof(b)=="string"){g=AJS._reprString(b)}else{continue}}h=f(j[b]);if(typeof(h)!="string"){continue}d.push(g+":"+h)}return"{"+d.join(",")+"}"},loadJSON:function(b,c,a){var g=AJS.getRequest(b,c);var f=function(h,d){var j=d.responseText;if(j=="Error"){g.errback(d)}else{return AJS.evalTxt(j)}};g.addCallback(f);return g},evalTxt:function(a){if(a.indexOf("new Date(")!=-1){return(new Function("return "+a))()}return window.JSON&&window.JSON.parse?window.JSON.parse(a):(new Function("return "+a))()},evalScriptTags:function(html){var script_data=html.match(/<script.*?>((\n|\r|.)*?)<\/script>/g);if(script_data!=null){for(var i=0;i<script_data.length;i++){var script_only=script_data[i].replace(/<script.*?>/g,"");script_only=script_only.replace(/<\/script>/g,"");eval(script_only)}}},encodeArguments:function(a){var b=[];for(k in a){b.push(k+"="+AJS.urlencode(a[k]))}return b.join("&")},_reprString:function(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},_reprDate:function(c){var d=c.getUTCFullYear();var a=c.getUTCDate();var f=c.getUTCMonth()+1;var b=function(g){if(g<10){g="0"+g}return g};return'"'+d+"-"+f+"-"+a+"T"+b(c.getUTCHours())+":"+b(c.getUTCMinutes())+":"+b(c.getUTCSeconds())+'"'},getMousePos:function(b){var a=0;var c=0;if(!b){var b=window.event}if(b.pageX||b.pageY){a=b.pageX;c=b.pageY}else{if(b.clientX||b.clientY){a=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;c=b.clientY+document.body.scrollTop+document.documentElement.scrollTop}}return{x:a,y:c}},getScrollTop:function(){var a;if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop}else{if(document.body){a=document.body.scrollTop}}return a},absolutePosition:function(c){if(!c){return{x:0,y:0}}if(c.scrollLeft){return{x:c.scrollLeft,y:c.scrollTop}}else{if(c.clientX){return{x:c.clientX,y:c.clientY}}}var b={x:c.offsetLeft,y:c.offsetTop};if(c.offsetParent){var a=c.offsetParent;while(a){b.x+=a.offsetLeft;b.y+=a.offsetTop;a=a.offsetParent}}if(AJS.isSafari()&&c.style.position=="absolute"){b.x-=document.body.offsetLeft;b.y-=document.body.offsetTop}return b},getWindowSize:function(c){c=c||document;var b,a;if(self.innerHeight){b=self.innerWidth;a=self.innerHeight}else{if(c.documentElement&&c.documentElement.clientHeight){b=c.documentElement.clientWidth;a=c.documentElement.clientHeight}else{if(c.body){b=c.body.clientWidth;a=c.body.clientHeight}}}return{w:b,h:a}},isOverlapping:function(g,c){var l=AJS.absolutePosition(g);var j=AJS.absolutePosition(c);var o=l.y;var r=l.x;var f=r+g.offsetWidth;var d=o+g.offsetHeight;var m=j.y;var q=j.x;var b=q+c.offsetWidth;var a=m+c.offsetHeight;var h=function(s){if(s>0){return"+"}else{if(s<0){return"-"}else{return 0}}};if((h(o-a)!=h(d-m))&&(h(r-b)!=h(f-q))){return true}return false},getEventElm:function(b){if(b&&!b.type&&!b.keyCode){return b}var a;if(!b){b=window.event}if(b.target){a=b.target}else{if(b.srcElement){a=b.srcElement}}if(a&&a.nodeType==3){a=a.parentNode}return a},setEventKey:function(a){if(!a){a=window.event}a.key=a.keyCode?a.keyCode:a.charCode;a.ctrl=a.ctrlKey;a.alt=a.altKey;a.meta=a.metaKey;a.shift=a.shiftKey},onEvent:function(c,b,a,d){c=AJS.$A(c);AJS.map(c,function(g){var f=ElementStore.get(g,"$events");if(f&&f[b]){delete f[b]}});return AJS.AEV(c,b,a,d)},ready_bound:false,is_ready:false,bindReady:function(){if(AJS.ready_bound){return}AJS.ready_bound=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);AJS.ready()},false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);AJS.ready()}});if(document.documentElement.doScroll&&window==window.top){(function(){if(AJS.is_ready){return}try{document.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}AJS.ready()})()}}}AJS.AEV(window,"load",AJS.ready)},ready_list:[],ready:function(a){if(AJS.is_ready){return}AJS.is_ready=true;AJS.map(AJS.ready_list,function(b){b.call(window)});AJS.ready_list=[]},_f_guid:2,addEventListener:function(c,a,b,d){c=AJS.$A(c);a=AJS.$A(a);AJS.map(c,function(g){if(d){b.listen_once=true}if(!b.$f_guid){b.$f_guid=AJS._f_guid++}var f=ElementStore.get(g,"$events");if(!f){f=ElementStore.set(g,"$events",{})}AJS.map(a,function(j){var h=f[j];if(g==window&&j=="load"){AJS.ready_list.push(b)}else{if(j=="lazy_load"){j="load"}if(!h){h=f[j]={};if(g["on"+j]){h[1]=g["on"+j]}}h[b.$f_guid]=b;g["on"+j]=AJS.handleEvent}});g=null})},handleEvent:function(j){var h=this;j=j||window.event;if(!j||!h){return}if(!j.ctrl){AJS.setEventKey(j)}var a=ElementStore.get(this,"$events");if(!a){return}var c=ElementStore.get(this,"$events")[j.type];var b=[];var f=true;for(var d in c){var g=c[d];if(g==AJS.handleEvent){continue}f=g.apply(h,[j]);if(g.listen_once){b.push(g)}}if(b.length>0){AJS.map(b,function(l){delete c[l.$f_guid]})}return f},removeEventListener:function(c,b,a){c=AJS.$A(c);AJS.map(c,function(f){var d=ElementStore.get(f,"$events");if(d&&d[b]){delete d[b][a.$f_guid]}})},delegate:function(j,a,b,c,g){var f=AJS._parseTagClassName(a);var h=f[0];var d=f[1];AJS.AEV(j,b,function(m){var l=AJS.getEventElm(m);if(l){var o=l;while(o){if(AJS.getNodeName(o)==h){if(!d||AJS.hasClass(o,d)){c.apply(o,[m])}}if(o==j){break}o=o.parentNode}}},g)},bind:function(b,a,c){b._cscope=a;return AJS._getRealScope(b,c)},bindMethods:function(b){for(var a in b){var c=b[a];if(typeof(c)=="function"){b[a]=AJS.$b(c,b)}}},preventDefault:function(a){a=a||window.event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}},stopPropagation:function(a){a=a||window.event;if(AJS.isIe()){a.cancelBubble=true}else{a.stopPropagation()}},_listenOnce:function(d,b,a){var c=function(){AJS.removeEventListener(d,b,c);a(arguments)};return c},_getRealScope:function(b,c){c=AJS.$A(c);var a=b._cscope||window;return function(){var d=AJS.$FA(arguments).concat(c);return b.apply(a,d)}},_reccruing_tos:{},setSingleTimeout:function(b,c,a){var d=AJS._reccruing_tos[b];if(d){clearTimeout(d)}AJS._reccruing_tos[b]=setTimeout(c,a)},keys:function(b){var a=[];for(var c in b){a.push(c)}return a},values:function(b){var a=[];for(var c in b){a.push(b[c])}return a},urlencode:function(a){return encodeURIComponent(AJS.isDefined(a)&&a.toString()||"")},urldecode:function(b){var a=decodeURIComponent(AJS.isDefined(b)&&b.toString()||"");return a.replace(/\+/g," ")},isDefined:function(a){return(a!="undefined"&&a!=null)},isArray:function(b){try{return b instanceof Array}catch(a){return false}},isString:function(a){return(typeof a=="string")},isNumber:function(a){return(typeof a=="number")},isObject:function(a){return(typeof a=="object")},isFunction:function(a){return(typeof a=="function")},isDict:function(b){var a=String(b);return a.indexOf(" Object")!=-1},exportToGlobalScope:function(a){a=a||window;for(e in AJS){if(e!="addEventListener"){a[e]=AJS[e]}}},log:function(b){try{if(AJS.isIe()){b=AJS.serializeJSON(b)}if(window._firebug){window._firebug.log(b)}else{if(window.console){console.log(b)}}}catch(a){alert(a)}},withScope:function(a,b){b.apply(a,[])},strip:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},trimIfNeeded:function(c,a,b){if(c.length>a){return c.substring(0,a)+(b||"...")}return c}};ElementStore={storage_dict:{},uuid:1,expando:"ElementStore"+(new Date).getTime(),get:function(b,a){return ElementStore.getStore(b)[a]||null},set:function(c,a,b){ElementStore.getStore(c)[a]=b;return b},has:function(b,a){return ElementStore.getStore(b)[a]!=undefined},remove:function(d,b){if(b!=undefined){var a=ElementStore.getStore(d);if(a[b]){delete a[b]}}else{var c=d[ElementStore.expando];if(c){delete ElementStore.storage_dict[c];d[ElementStore.expando]=null}}},getStore:function(d){var c=ElementStore.expando;var a=ElementStore.storage_dict;var b=d[c];if(!b){b=d[c]=ElementStore.uuid++;a[b]={}}return a[b]}};AJS.Class=function(a){var b=function(){if(arguments[0]!="no_init"){return this.init.apply(this,arguments)}};b.prototype=a;AJS.update(b,AJS.Class.prototype);return b};AJS.Class.prototype={extend:function(a){var b=new this("no_init");for(k in a){var c=b[k];var d=a[k];if(c&&c!=d&&typeof d=="function"){d=this._parentize(d,c)}b[k]=d}return new AJS.Class(b)},implement:function(a){AJS.update(this.prototype,a)},_parentize:function(b,a){return function(){this.parent=a;return b.apply(this,arguments)}}};AJS.$=AJS.getElement;AJS.$$=AJS.getElements;AJS.$f=AJS.getFormElement;AJS.$b=AJS.bind;AJS.$p=AJS.partial;AJS.$FA=AJS.forceArray;AJS.$A=AJS.createArray;AJS.DI=AJS.documentInsert;AJS.ACN=AJS.appendChildNodes;AJS.RCN=AJS.replaceChildNodes;AJS.ATT=AJS.appendToTop;AJS.AEV=AJS.addEventListener;AJS.REV=AJS.removeEventListener;AJS.$bytc=AJS.getElementsByTagAndClassName;AJS.$AP=AJS.absolutePosition;AJS.loadJSONDoc=AJS.loadJSON;AJS.queryArguments=AJS.encodeArguments;AJS.$gp=AJS.getParentBytc;AJS.$gc=AJS.getChildBytc;AJS.$sv=AJS.setVisibility;AJS.generalErrorback=null;AJS.generalCallback=null;AJS.annotateAjaxData=[];AJSDeferred=function(b,c,a){this.callbacks=[];this.errbacks=[];this.req=b;this.http_method=c;this.http_url=a};AJSDeferred.prototype={excCallbackSeq:function(c,f){var d=c.responseText;if(AJS.generalCallback){d=AJS.generalCallback(c,f);if(!d){return}}while(f.length>0){var b=f.pop();var a=b(d,c);if(a){d=a}else{if(a==false){break}}}},callback:function(){this.excCallbackSeq(this.req,this.callbacks)},errback:function(){if(this.errbacks.length==0){if(AJS.ajaxErrorHandler){AJS.ajaxErrorHandler(req.responseText,req)}else{var b=this.req.responseText.substring(0,200);if(AJS.strip(b)&&b.indexOf("<html")==-1){alert("Error encountered:\n"+b)}}}if(AJS.generalErrorback){var a=AJS.generalErrorback(this.req);if(!a){return}}this.excCallbackSeq(this.req,this.errbacks)},addErrback:function(a){this.errbacks.unshift(a)},addCallback:function(a){this.callbacks.unshift(a)},abort:function(){this.req.abort()},addCallbacks:function(b,a){this.addCallback(b);this.addErrback(a)},_onreadystatechange:function(){var b=this.req;var f=this;if(b.readyState==4){var a="";try{a=b.status}catch(c){}if(a==200||a==304||b.responseText==null){this.callback()}else{this.errback()}}},sendReq:function(d){var c=this.req;var b=this.http_method;var a=this.http_url;if(AJS.annotateAjaxData.length>0){AJS.map(AJS.annotateAjaxData,function(f){f(d,a,b)})}if(b=="POST"){c.open(b,a,true);c.onreadystatechange=AJS.$b(this._onreadystatechange,this);c.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(AJS.isObject(d)){c.send(AJS.encodeArguments(d))}else{if(AJS.isDefined(d)){c.send(d)}else{c.send("")}}}else{c.open("GET",a,true);c.onreadystatechange=AJS.$b(this._onreadystatechange,this);c.send(null)}}};AJS._createDomShortcuts()}script_loaded=true;AJS.bindReady();AJS.fx={_shades:{0:"ffffff",1:"ffffee",2:"ffffdd",3:"ffffcc",4:"ffffbb",5:"ffffaa",6:"ffff99"},highlight:function(d,a,b){if(!b){b=AJS.fx._shades}var c=new AJS.fx.Base({duration:600,fps:15,now:6});c.setOptions(a);AJS.update(c,{increase:function(){var g=AJS.$(d);if(!g){return}var f=parseInt(this.now);if(!AJS.hasClass(g,"shade_"+f)&&f!=0){AJS.addClass(g,"shade_"+f)}AJS.removeClass(g,"shade_"+(f+1));g.style.backgroundColor="#"+b[f]}});return c.custom(c.options.now,0)},fadeIn:function(c,a){a=a||{};if(!a.from){a.from=0;AJS.setOpacity(c,0)}if(!a.to){a.to=1}var b=new AJS.fx.Style(c,"opacity",a);return b.custom(a.from,a.to)},fadeOut:function(c,a){a=a||{};if(!a.from){a.from=1}if(!a.to){a.to=0}if(!a.duration){a.duration=300}var b=new AJS.fx.Style(c,"opacity",a);return b.custom(a.from,a.to)},setWidth:function(c,a){var b=new AJS.fx.Style(c,"width",a);return b.custom(a.from,a.to)},setHeight:function(c,a){var b=new AJS.fx.Style(c,"height",a);return b.custom(a.from,a.to)}};AJS.fx.Base=new AJS.Class({init:function(a){this.options={onStart:function(){},onComplete:function(){},transition:AJS.fx.Transitions.sineInOut,duration:500,wait:true,fps:50};AJS.update(this.options,a);AJS.bindMethods(this)},setOptions:function(a){AJS.update(this.options,a)},step:function(){var a=new Date().getTime();if(a<this.time+this.options.duration){this.cTime=a-this.time;this.setNow()}else{setTimeout(AJS.$b(this.options.onComplete,this,[this.elm]),10);this.clearTimer();this.now=this.to}this.increase()},setNow:function(){this.now=this.compute(this.from,this.to)},compute:function(c,b){var a=b-c;return this.options.transition(this.cTime,c,a,this.options.duration)},clearTimer:function(){clearInterval(this.timer);this.timer=null;return this},_start:function(b,a){if(!this.options.wait){this.clearTimer()}if(this.timer){return}setTimeout(AJS.$p(this.options.onStart,this.elm),10);this.from=b;this.to=a;this.time=new Date().getTime();this.timer=setInterval(this.step,Math.round(1000/this.options.fps));return this},custom:function(b,a){return this._start(b,a)},set:function(a){this.now=a;this.increase();return this},setStyle:function(c,a,b){if(c.id&&!AJS.$(c.id)){this.options.onComplete();return this.clearTimer()}if(this.property=="opacity"){AJS.setOpacity(c,b)}else{AJS.setStyle(c,a,b)}}});AJS.fx.Style=AJS.fx.Base.extend({init:function(c,b,a){this.parent();this.elm=c;this.setOptions(a);this.property=b},increase:function(){this.setStyle(this.elm,this.property,this.now)}});AJS.fx.Styles=AJS.fx.Base.extend({init:function(b,a){this.parent();this.elm=AJS.$(b);this.setOptions(a);this.now={}},setNow:function(){for(p in this.from){this.now[p]=this.compute(this.from[p],this.to[p])}},custom:function(a){if(this.timer&&this.options.wait){return}var c={};var b={};for(p in a){c[p]=a[p][0];b[p]=a[p][1]}return this._start(c,b)},increase:function(){for(var a in this.now){this.setStyle(this.elm,a,this.now[a])}}});AJS.fx.Transitions={linear:function(f,a,h,g){return h*f/g+a},sineInOut:function(f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a}};script_loaded=true;AJS.Drag=AJS.Class({current_handler:null,current_root:null,last_mouse_x:0,last_mouse_y:0,init:function(){AJS.bindMethods(this)},dragAble:function(a,b){b=b||{};var c=b.handler||a;c=AJS.$(c);c._kws=b;c._root=AJS.$(a);c._start_fn=function(d){AJS.dnd._start(c,d);AJS.preventDefault(d);return false};AJS.AEV(c,"mousedown",c._start_fn)},removeDragAble:function(a){if(a._start_fn){AJS.REV(a,"mousedown",a._start_fn)}},_start:function(b,c){this.current_handler=b;var a=this.current_root=b._root;this.last_mouse_pos=AJS.getMousePos(c);this.old_z_index=a.style.zIndex;a.style.zIndex=1000;if(b._kws.on_start){b._kws.on_start()}AJS.AEV(document,"mousemove",this._move);AJS.AEV(document,"mouseup",this._end)},_move:function(m){var r=this.current_handler;if(!r){return false}var o=this.current_root;var q=r._kws;var j=AJS.getMousePos(m);var a=this.last_mouse_pos;var h=(j.x-a.x);var g=(j.y-a.y);g+=o.offsetTop;h+=o.offsetLeft;if(q.move_filter){var l=q.move_filter(h,g);h=l[0];g=l[1]}if(q.move_x!=false){AJS.setLeft(o,h)}if(q.move_y!=false){AJS.setTop(o,g)}if(q.on_drag){q.on_drag(h,g)}this.last_mouse_pos=j;if(q.scroll_on_overflow!=false){var f=AJS.getScrollTop();var d=f+AJS.getWindowSize().h;var b=AJS.absolutePosition(o).y;var c=o.offsetTop+o.offsetHeight;if(b<=f+30){window.scrollBy(0,-20)}else{if(c>=d-30){window.scrollBy(0,20)}}}AJS.preventDefault(m);return false},_end:function(c){var a=this.current_root;var b=this.current_handler;AJS.REV(document,"mousemove",this._move);AJS.REV(document,"mouseup",this._end);if(b._kws.on_end){b._kws.on_end()}this.current_handler=null;this.current_root=null;a.style.zIndex=this.old_z_index;AJS.preventDefault(c);return false}});AJS.dnd=new AJS.Drag();script_loaded=true;Signals={callbacks:{},connect:function(a,b){AJS.map(a.split(" "),function(c){var d=Signals.callbacks[c];if(!d){d=Signals.callbacks[c]=[]}d.push(b)});return b},disconnect:function(a,b){AJS.map(a.split(" "),function(d){var f=Signals.getListeners(d);var c=AJS.getIndex(b,f);if(c!=-1){f.splice(c,1)}});return b},getListeners:function(a){return Signals.callbacks[a]||[]},sendSignal:function(){var b=AJS.forceArray(arguments);if(b.length<1){arguments=null;return false}var a=b.shift();AJS.map(a.split(" "),function(c){var d=Signals.getListeners(c);AJS.map(d,function(f){f.apply(window,b)})});arguments=null;return true}};AJS_Timestamp="20150508";var Handlebars=(function(){var a=(function(){var r;function s(t){this.string=t}s.prototype.toString=function(){return""+this.string};r=s;return r})();var o=(function(A){var B={};var u=A;var C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var r=/[&<>"'`]/g;var v=/[&<>"'`]/;function D(E){return C[E]||"&amp;"}function z(G,F){for(var E in F){if(Object.prototype.hasOwnProperty.call(F,E)){G[E]=F[E]}}}B.extend=z;var t=Object.prototype.toString;B.toString=t;var s=function(E){return typeof E==="function"};if(s(/x/)){s=function(E){return typeof E==="function"&&t.call(E)==="[object Function]"}}var s;B.isFunction=s;var y=Array.isArray||function(E){return(E&&typeof E==="object")?t.call(E)==="[object Array]":false};B.isArray=y;function x(E){if(E instanceof u){return E.toString()}else{if(!E&&E!==0){return""}}E=""+E;if(!v.test(E)){return E}return E.replace(r,D)}B.escapeExpression=x;function w(E){if(!E&&E!==0){return true}else{if(y(E)&&E.length===0){return true}else{return false}}}B.isEmpty=w;return B})(a);var d=(function(){var s;var t=["description","fileName","lineNumber","message","name","number","stack"];function r(y,x){var v;if(x&&x.firstLine){v=x.firstLine;y+=" - "+v+":"+x.firstColumn}var w=Error.prototype.constructor.call(this,y);for(var u=0;u<t.length;u++){this[t[u]]=w[t[u]]}if(v){this.lineNumber=v;this.column=x.firstColumn}}r.prototype=new Error();s=r;return s})();var l=(function(C,F){var E={};var A=C;var y=F;var H="1.3.0";E.VERSION=H;var s=4;E.COMPILER_REVISION=s;var v={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};E.REVISION_CHANGES=v;var z=A.isArray,u=A.isFunction,t=A.toString,r="[object Object]";function x(J,I){this.helpers=J||{};this.partials=I||{};B(this)}E.HandlebarsEnvironment=x;x.prototype={constructor:x,logger:D,log:w,registerHelper:function(J,K,I){if(t.call(J)===r){if(I||K){throw new y("Arg not supported with multiple helpers")}A.extend(this.helpers,J)}else{if(I){K.not=I}this.helpers[J]=K}},registerPartial:function(I,J){if(t.call(I)===r){A.extend(this.partials,I)}else{this.partials[I]=J}}};function B(I){I.registerHelper("helperMissing",function(J){if(arguments.length===2){return undefined}else{throw new y("Missing helper: '"+J+"'")}});I.registerHelper("blockHelperMissing",function(L,K){var J=K.inverse||function(){},M=K.fn;if(u(L)){L=L.call(this)}if(L===true){return M(this)}else{if(L===false||L==null){return J(this)}else{if(z(L)){if(L.length>0){return I.helpers.each(L,K)}else{return J(this)}}else{return M(L)}}}});I.registerHelper("each",function(J,R){var P=R.fn,L=R.inverse;var N=0,O="",M;if(u(J)){J=J.call(this)}if(R.data){M=G(R.data)}if(J&&typeof J==="object"){if(z(J)){for(var K=J.length;N<K;N++){if(M){M.index=N;M.first=(N===0);M.last=(N===(J.length-1))}O=O+P(J[N],{data:M})}}else{for(var Q in J){if(J.hasOwnProperty(Q)){if(M){M.key=Q;M.index=N;M.first=(N===0)}O=O+P(J[Q],{data:M});N++}}}}if(N===0){O=L(this)}return O});I.registerHelper("if",function(K,J){if(u(K)){K=K.call(this)}if((!J.hash.includeZero&&!K)||A.isEmpty(K)){return J.inverse(this)}else{return J.fn(this)}});I.registerHelper("unless",function(K,J){return I.helpers["if"].call(this,K,{fn:J.inverse,inverse:J.fn,hash:J.hash})});I.registerHelper("with",function(K,J){if(u(K)){K=K.call(this)}if(!A.isEmpty(K)){return J.fn(K)}});I.registerHelper("log",function(K,J){var L=J.data&&J.data.level!=null?parseInt(J.data.level,10):1;I.log(L,K)})}var D={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(K,I){if(D.level<=K){var J=D.methodMap[K];if(typeof console!=="undefined"&&console[J]){console[J].call(console,I)}}}};E.logger=D;function w(J,I){D.log(J,I)}E.log=w;var G=function(I){var J={};A.extend(J,I);return J};E.createFrame=G;return E})(o,d);var h=(function(A,E,u){var C={};var z=A;var x=E;var t=u.COMPILER_REVISION;var w=u.REVISION_CHANGES;function s(H){var G=H&&H[0]||1,J=t;if(G!==J){if(G<J){var F=w[J],I=w[G];throw new x("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+F+") or downgrade your runtime to an older version ("+I+").")}else{throw new x("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+H[1]+").")}}}C.checkRevision=s;function B(F,I){if(!I){throw new x("No environment passed to template")}var H=function(K,M,O,P,N,Q){var J=I.VM.invokePartial.apply(this,arguments);if(J!=null){return J}if(I.compile){var L={helpers:P,partials:N,data:Q};N[M]=I.compile(K,{data:Q!==undefined},I);return N[M](O,L)}else{throw new x("The partial "+M+" could not be compiled when running in runtime-only mode")}};var G={escapeExpression:z.escapeExpression,invokePartial:H,programs:[],program:function(K,L,M){var J=this.programs[K];if(M){J=y(K,L,M)}else{if(!J){J=this.programs[K]=y(K,L)}}return J},merge:function(L,K){var J=L||K;if(L&&K&&(L!==K)){J={};z.extend(J,K);z.extend(J,L)}return J},programWithDepth:I.VM.programWithDepth,noop:I.VM.noop,compilerInfo:null};return function(M,K){K=K||{};var N=K.partial?K:I,O,L;if(!K.partial){O=K.helpers;L=K.partials}var J=F.call(G,N,M,O,L,K.data);if(!K.partial){I.VM.checkRevision(G.compilerInfo)}return J}}C.template=B;function v(G,H,I){var F=Array.prototype.slice.call(arguments,3);var J=function(L,K){K=K||{};return H.apply(this,[L,K.data||I].concat(F))};J.program=G;J.depth=F.length;return J}C.programWithDepth=v;function y(F,G,H){var I=function(K,J){J=J||{};return G(K,J.data||H)};I.program=F;I.depth=0;return I}C.program=y;function r(F,H,J,K,I,L){var G={partial:true,helpers:K,partials:I,data:L};if(F===undefined){throw new x("The partial "+H+" could not be found")}else{if(F instanceof Function){return F(J,G)}}}C.invokePartial=r;function D(){return""}C.noop=D;return C})(o,d,l);var g=(function(B,D,t,x,A){var C;var r=B;var u=D;var w=t;var z=x;var v=A;var y=function(){var E=new r.HandlebarsEnvironment();z.extend(E,r);E.SafeString=u;E.Exception=w;E.Utils=z;E.VM=v;E.template=function(F){return v.template(F,E)};return E};var s=y();s.create=y;C=s;return C})(l,a,d,o,h);var m=(function(v){var t;var s=v;function r(w){w=w||{};this.firstLine=w.first_line;this.firstColumn=w.first_column;this.lastColumn=w.last_column;this.lastLine=w.last_line}var u={ProgramNode:function(y,A,x,z){var w,B;if(arguments.length===3){z=x;x=null}else{if(arguments.length===2){z=A;A=null}}r.call(this,z);this.type="program";this.statements=y;this.strip={};if(x){B=x[0];if(B){w={first_line:B.firstLine,last_line:B.lastLine,last_column:B.lastColumn,first_column:B.firstColumn};this.inverse=new u.ProgramNode(x,A,w)}else{this.inverse=new u.ProgramNode(x,A)}this.strip.right=A.left}else{if(A){this.strip.left=A.right}}},MustacheNode:function(B,A,w,y,x){r.call(this,x);this.type="mustache";this.strip=y;if(w!=null&&w.charAt){var z=w.charAt(3)||w.charAt(2);this.escaped=z!=="{"&&z!=="&"}else{this.escaped=!!w}if(B instanceof u.SexprNode){this.sexpr=B}else{this.sexpr=new u.SexprNode(B,A)}this.sexpr.isRoot=true;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(B,y,w){r.call(this,w);this.type="sexpr";this.hash=y;var A=this.id=B[0];var z=this.params=B.slice(1);var x=this.eligibleHelper=A.isSimple;this.isHelper=x&&(z.length||y)},PartialNode:function(w,y,z,x){r.call(this,x);this.type="partial";this.partialName=w;this.context=y;this.strip=z},BlockNode:function(z,x,w,A,y){r.call(this,y);if(z.sexpr.id.original!==A.path.original){throw new s(z.sexpr.id.original+" doesn't match "+A.path.original,this)}this.type="block";this.mustache=z;this.program=x;this.inverse=w;this.strip={left:z.strip.left,right:A.strip.right};(x||w).strip.left=z.strip.right;(w||x).strip.right=A.strip.left;if(w&&!x){this.isInverse=true}},ContentNode:function(w,x){r.call(this,x);this.type="content";this.string=w},HashNode:function(x,w){r.call(this,w);this.type="hash";this.pairs=x},IdNode:function(C,B){r.call(this,B);this.type="ID";var A="",y=[],D=0;for(var z=0,w=C.length;z<w;z++){var x=C[z].part;A+=(C[z].separator||"")+x;if(x===".."||x==="."||x==="this"){if(y.length>0){throw new s("Invalid path: "+A,this)}else{if(x===".."){D++}else{this.isScoped=true}}}else{y.push(x)}}this.original=A;this.parts=y;this.string=y.join(".");this.depth=D;this.isSimple=C.length===1&&!this.isScoped&&D===0;this.stringModeValue=this.string},PartialNameNode:function(w,x){r.call(this,x);this.type="PARTIAL_NAME";this.name=w.original},DataNode:function(x,w){r.call(this,w);this.type="DATA";this.id=x},StringNode:function(w,x){r.call(this,x);this.type="STRING";this.original=this.string=this.stringModeValue=w},IntegerNode:function(w,x){r.call(this,x);this.type="INTEGER";this.original=this.integer=w;this.stringModeValue=Number(w)},BooleanNode:function(w,x){r.call(this,x);this.type="BOOLEAN";this.bool=w;this.stringModeValue=w==="true"},CommentNode:function(x,w){r.call(this,w);this.type="comment";this.comment=x}};t=u;return t})(d);var b=(function(){var s;var r=(function(){var A={trace:function w(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function v(B,E,F,I,H,D,G){var C=D.length-1;switch(H){case 1:return new I.ProgramNode(D[C-1],this._$);break;case 2:return new I.ProgramNode([],this._$);break;case 3:this.$=new I.ProgramNode([],D[C-1],D[C],this._$);break;case 4:this.$=new I.ProgramNode(D[C-2],D[C-1],D[C],this._$);break;case 5:this.$=new I.ProgramNode(D[C-1],D[C],[],this._$);break;case 6:this.$=new I.ProgramNode(D[C],this._$);break;case 7:this.$=new I.ProgramNode([],this._$);break;case 8:this.$=new I.ProgramNode([],this._$);break;case 9:this.$=[D[C]];break;case 10:D[C-1].push(D[C]);this.$=D[C-1];break;case 11:this.$=new I.BlockNode(D[C-2],D[C-1].inverse,D[C-1],D[C],this._$);break;case 12:this.$=new I.BlockNode(D[C-2],D[C-1],D[C-1].inverse,D[C],this._$);break;case 13:this.$=D[C];break;case 14:this.$=D[C];break;case 15:this.$=new I.ContentNode(D[C],this._$);break;case 16:this.$=new I.CommentNode(D[C],this._$);break;case 17:this.$=new I.MustacheNode(D[C-1],null,D[C-2],t(D[C-2],D[C]),this._$);break;case 18:this.$=new I.MustacheNode(D[C-1],null,D[C-2],t(D[C-2],D[C]),this._$);break;case 19:this.$={path:D[C-1],strip:t(D[C-2],D[C])};break;case 20:this.$=new I.MustacheNode(D[C-1],null,D[C-2],t(D[C-2],D[C]),this._$);break;case 21:this.$=new I.MustacheNode(D[C-1],null,D[C-2],t(D[C-2],D[C]),this._$);break;case 22:this.$=new I.PartialNode(D[C-2],D[C-1],t(D[C-3],D[C]),this._$);break;case 23:this.$=t(D[C-1],D[C]);break;case 24:this.$=new I.SexprNode([D[C-2]].concat(D[C-1]),D[C],this._$);break;case 25:this.$=new I.SexprNode([D[C]],null,this._$);break;case 26:this.$=D[C];break;case 27:this.$=new I.StringNode(D[C],this._$);break;case 28:this.$=new I.IntegerNode(D[C],this._$);break;case 29:this.$=new I.BooleanNode(D[C],this._$);break;case 30:this.$=D[C];break;case 31:D[C-1].isHelper=true;this.$=D[C-1];break;case 32:this.$=new I.HashNode(D[C],this._$);break;case 33:this.$=[D[C-2],D[C]];break;case 34:this.$=new I.PartialNameNode(D[C],this._$);break;case 35:this.$=new I.PartialNameNode(new I.StringNode(D[C],this._$),this._$);break;case 36:this.$=new I.PartialNameNode(new I.IntegerNode(D[C],this._$));break;case 37:this.$=new I.DataNode(D[C],this._$);break;case 38:this.$=new I.IdNode(D[C],this._$);break;case 39:D[C-2].push({part:D[C],separator:D[C-1]});this.$=D[C-2];break;case 40:this.$=[{part:D[C]}];break;case 43:this.$=[];break;case 44:D[C-1].push(D[C]);break;case 47:this.$=[D[C]];break;case 48:D[C-1].push(D[C]);break}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function x(C,B){throw new Error(C)},parse:function z(K){var R=this,H=[0],aa=[null],M=[],ab=this.table,C="",L=0,Y=0,E=0,J=2,O=1;this.lexer.setInput(K);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var D=this.lexer.yylloc;M.push(D);var F=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function Q(ad){H.length=H.length-2*ad;aa.length=aa.length-ad;M.length=M.length-ad}function P(){var ad;ad=R.lexer.lex()||1;if(typeof ad!=="number"){ad=R.symbols_[ad]||ad}return ad}var X,T,G,W,ac,N,V={},S,Z,B,I;while(true){G=H[H.length-1];if(this.defaultActions[G]){W=this.defaultActions[G]}else{if(X===null||typeof X=="undefined"){X=P()}W=ab[G]&&ab[G][X]}if(typeof W==="undefined"||!W.length||!W[0]){var U="";if(!E){I=[];for(S in ab[G]){if(this.terminals_[S]&&S>2){I.push("'"+this.terminals_[S]+"'")}}if(this.lexer.showPosition){U="Parse error on line "+(L+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[X]||X)+"'"}else{U="Parse error on line "+(L+1)+": Unexpected "+(X==1?"end of input":"'"+(this.terminals_[X]||X)+"'")}this.parseError(U,{text:this.lexer.match,token:this.terminals_[X]||X,line:this.lexer.yylineno,loc:D,expected:I})}}if(W[0] instanceof Array&&W.length>1){throw new Error("Parse Error: multiple actions possible at state: "+G+", token: "+X)}switch(W[0]){case 1:H.push(X);aa.push(this.lexer.yytext);M.push(this.lexer.yylloc);H.push(W[1]);X=null;if(!T){Y=this.lexer.yyleng;C=this.lexer.yytext;L=this.lexer.yylineno;D=this.lexer.yylloc;if(E>0){E--}}else{X=T;T=null}break;case 2:Z=this.productions_[W[1]][1];V.$=aa[aa.length-Z];V._$={first_line:M[M.length-(Z||1)].first_line,last_line:M[M.length-1].last_line,first_column:M[M.length-(Z||1)].first_column,last_column:M[M.length-1].last_column};if(F){V._$.range=[M[M.length-(Z||1)].range[0],M[M.length-1].range[1]]}N=this.performAction.call(V,C,Y,L,this.yy,W[1],aa,M);if(typeof N!=="undefined"){return N}if(Z){H=H.slice(0,-1*Z*2);aa=aa.slice(0,-1*Z);M=M.slice(0,-1*Z)}H.push(this.productions_[W[1]][0]);aa.push(V.$);M.push(V._$);B=ab[H[H.length-2]][H[H.length-1]];H.push(B);break;case 3:return true}}return true}};function t(B,C){return{left:B.charAt(2)==="~",right:C.charAt(0)==="~"||C.charAt(1)==="~"}}var u=(function(){var E=({EOF:1,parseError:function G(J,I){if(this.yy.parser){this.yy.parser.parseError(J,I)}else{throw new Error(J)}},setInput:function(I){this._input=I;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0]}this.offset=0;return this},input:function(){var J=this._input[0];this.yytext+=J;this.yyleng++;this.offset++;this.match+=J;this.matched+=J;var I=J.match(/(?:\r\n?|\n).*/g);if(I){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges){this.yylloc.range[1]++}this._input=this._input.slice(1);return J},unput:function(K){var I=K.length;var J=K.split(/(?:\r\n?|\n)/g);this._input=K+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-I-1);this.offset-=I;var M=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(J.length-1){this.yylineno-=J.length-1}var L=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:J?(J.length===M.length?this.yylloc.first_column:0)+M[M.length-J.length].length-J[0].length:this.yylloc.first_column-I};if(this.options.ranges){this.yylloc.range=[L[0],L[0]+this.yyleng-I]}return this},more:function(){this._more=true;return this},less:function(I){this.unput(this.match.slice(I))},pastInput:function(){var I=this.matched.substr(0,this.matched.length-this.match.length);return(I.length>20?"...":"")+I.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var I=this.match;if(I.length<20){I+=this._input.substr(0,20-I.length)}return(I.substr(0,20)+(I.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var I=this.pastInput();var J=new Array(I.length+1).join("-");return I+this.upcomingInput()+"\n"+J+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var O,M,J,L,K,I;if(!this._more){this.yytext="";this.match=""}var P=this._currentRules();for(var N=0;N<P.length;N++){J=this._input.match(this.rules[P[N]]);if(J&&(!M||J[0].length>M[0].length)){M=J;L=N;if(!this.options.flex){break}}}if(M){I=M[0].match(/(?:\r\n?|\n).*/g);if(I){this.yylineno+=I.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:I?I[I.length-1].length-I[I.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+M[0].length};this.yytext+=M[0];this.match+=M[0];this.matches=M;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(M[0].length);this.matched+=M[0];O=this.performAction.call(this,this.yy,this,P[L],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false}if(O){return O}else{return}}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function B(){var I=this.next();if(typeof I!=="undefined"){return I}else{return this.lex()}},begin:function C(I){this.conditionStack.push(I)},popState:function H(){return this.conditionStack.pop()},_currentRules:function F(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function C(I){this.begin(I)}});E.options={};E.performAction=function D(N,J,M,I){function K(P,O){return J.yytext=J.yytext.substr(P,J.yyleng-O)}var L=I;switch(M){case 0:if(J.yytext.slice(-2)==="\\\\"){K(0,1);this.begin("mu")}else{if(J.yytext.slice(-1)==="\\"){K(0,1);this.begin("emu")}else{this.begin("mu")}}if(J.yytext){return 14}break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:K(0,4);this.popState();return 15;break;case 4:return 35;break;case 5:return 36;break;case 6:return 25;break;case 7:return 16;break;case 8:return 20;break;case 9:return 19;break;case 10:return 19;break;case 11:return 23;break;case 12:return 22;break;case 13:this.popState();this.begin("com");break;case 14:K(3,5);this.popState();return 15;break;case 15:return 22;break;case 16:return 41;break;case 17:return 40;break;case 18:return 40;break;case 19:return 44;break;case 20:break;case 21:this.popState();return 24;break;case 22:this.popState();return 18;break;case 23:J.yytext=K(1,2).replace(/\\"/g,'"');return 32;break;case 24:J.yytext=K(1,2).replace(/\\'/g,"'");return 32;break;case 25:return 42;break;case 26:return 34;break;case 27:return 34;break;case 28:return 33;break;case 29:return 40;break;case 30:J.yytext=K(1,2);return 40;break;case 31:return"INVALID";break;case 32:return 5;break}};E.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];E.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},INITIAL:{rules:[0,1,32],inclusive:true}};return E})();A.lexer=u;function y(){this.yy={}}y.prototype=A;A.Parser=y;return new y})();s=r;return s})();var q=(function(v,r){var s={};var w=v;var t=r;s.parser=w;function u(x){if(x.constructor===t.ProgramNode){return x}w.yy=t;return w.parse(x)}s.parse=u;return s})(b,m);var f=(function(w){var v={};var r=w;function t(){}v.Compiler=t;t.prototype={compiler:t,disassemble:function(){var C=this.opcodes,B,z=[],E,D;for(var A=0,x=C.length;A<x;A++){B=C[A];if(B.opcode==="DECLARE"){z.push("DECLARE "+B.name+"="+B.value)}else{E=[];for(var y=0;y<B.args.length;y++){D=B.args[y];if(typeof D==="string"){D='"'+D.replace("\n","\\n")+'"'}E.push(D)}z.push(B.opcode+" "+E.join(" "))}}return z.join("\n")},equals:function(y){var x=this.opcodes.length;if(y.opcodes.length!==x){return false}for(var B=0;B<x;B++){var C=this.opcodes[B],z=y.opcodes[B];if(C.opcode!==z.opcode||C.args.length!==z.args.length){return false}for(var A=0;A<C.args.length;A++){if(C.args[A]!==z.args[A]){return false}}}x=this.children.length;if(y.children.length!==x){return false}for(B=0;B<x;B++){if(!this.children[B].equals(y.children[B])){return false}}return true},guid:0,compile:function(x,z){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=z;var A=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(A){for(var y in A){this.options.knownHelpers[y]=A[y]}}return this.accept(x)},accept:function(z){var y=z.strip||{},x;if(y.left){this.opcode("strip")}x=this[z.type](z);if(y.right){this.opcode("strip")}return x},program:function(z){var y=z.statements;for(var A=0,x=y.length;A<x;A++){this.accept(y[A])}this.isSimple=x===1;this.depths.list=this.depths.list.sort(function(C,B){return C-B});return this},compileProgram:function(z){var x=new this.compiler().compile(z,this.options);var A=this.guid++,C;this.usePartial=this.usePartial||x.usePartial;this.children[A]=x;for(var B=0,y=x.depths.list.length;B<y;B++){C=x.depths.list[B];if(C<2){continue}else{this.addDepth(C-1)}}return A},block:function(C){var B=C.mustache,y=C.program,x=C.inverse;if(y){y=this.compileProgram(y)}if(x){x=this.compileProgram(x)}var A=B.sexpr;var z=this.classifySexpr(A);if(z==="helper"){this.helperSexpr(A,y,x)}else{if(z==="simple"){this.simpleSexpr(A);this.opcode("pushProgram",y);this.opcode("pushProgram",x);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousSexpr(A,y,x);this.opcode("pushProgram",y);this.opcode("pushProgram",x);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}}this.opcode("append")},hash:function(A){var z=A.pairs,C,B;this.opcode("pushHash");for(var y=0,x=z.length;y<x;y++){C=z[y];B=C[1];if(this.options.stringParams){if(B.depth){this.addDepth(B.depth)}this.opcode("getContext",B.depth||0);this.opcode("pushStringParam",B.stringModeValue,B.type);if(B.type==="sexpr"){this.sexpr(B)}}else{this.accept(B)}this.opcode("assignToHash",C[0])}this.opcode("popHash")},partial:function(x){var y=x.partialName;this.usePartial=true;if(x.context){this.ID(x.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",y.name);this.opcode("append")},content:function(x){this.opcode("appendContent",x.string)},mustache:function(x){this.sexpr(x.sexpr);if(x.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousSexpr:function(B,z,y){var C=B.id,A=C.parts[0],x=z!=null||y!=null;this.opcode("getContext",C.depth);this.opcode("pushProgram",z);this.opcode("pushProgram",y);this.opcode("invokeAmbiguous",A,x)},simpleSexpr:function(x){var y=x.id;if(y.type==="DATA"){this.DATA(y)}else{if(y.parts.length){this.ID(y)}else{this.addDepth(y.depth);this.opcode("getContext",y.depth);this.opcode("pushContext")}}this.opcode("resolvePossibleLambda")},helperSexpr:function(A,y,x){var B=this.setupFullMustacheParams(A,y,x),z=A.id.parts[0];if(this.options.knownHelpers[z]){this.opcode("invokeKnownHelper",B.length,z)}else{if(this.options.knownHelpersOnly){throw new r("You specified knownHelpersOnly, but used the unknown helper "+z,A)}else{this.opcode("invokeHelper",B.length,z,A.isRoot)}}},sexpr:function(y){var x=this.classifySexpr(y);if(x==="simple"){this.simpleSexpr(y)}else{if(x==="helper"){this.helperSexpr(y)}else{this.ambiguousSexpr(y)}}},ID:function(A){this.addDepth(A.depth);this.opcode("getContext",A.depth);var y=A.parts[0];if(!y){this.opcode("pushContext")}else{this.opcode("lookupOnContext",A.parts[0])}for(var z=1,x=A.parts.length;z<x;z++){this.opcode("lookup",A.parts[z])}},DATA:function(z){this.options.data=true;if(z.id.isScoped||z.id.depth){throw new r("Scoped data references are not supported: "+z.original,z)}this.opcode("lookupData");var A=z.id.parts;for(var y=0,x=A.length;y<x;y++){this.opcode("lookup",A[y])}},STRING:function(x){this.opcode("pushString",x.string)},INTEGER:function(x){this.opcode("pushLiteral",x.integer)},BOOLEAN:function(x){this.opcode("pushLiteral",x.bool)},comment:function(){},opcode:function(x){this.opcodes.push({opcode:x,args:[].slice.call(arguments,1)})},declare:function(x,y){this.opcodes.push({opcode:"DECLARE",name:x,value:y})},addDepth:function(x){if(x===0){return}if(!this.depths[x]){this.depths[x]=true;this.depths.list.push(x)}},classifySexpr:function(A){var z=A.isHelper;var B=A.eligibleHelper;var y=this.options;if(B&&!z){var x=A.id.parts[0];if(y.knownHelpers[x]){z=true}else{if(y.knownHelpersOnly){B=false}}}if(z){return"helper"}else{if(B){return"ambiguous"}else{return"simple"}}},pushParams:function(z){var x=z.length,y;while(x--){y=z[x];if(this.options.stringParams){if(y.depth){this.addDepth(y.depth)}this.opcode("getContext",y.depth||0);this.opcode("pushStringParam",y.stringModeValue,y.type);if(y.type==="sexpr"){this.sexpr(y)}}else{this[y.type](y)}}},setupFullMustacheParams:function(z,y,x){var A=z.params;this.pushParams(A);this.opcode("pushProgram",y);this.opcode("pushProgram",x);if(z.hash){this.hash(z.hash)}else{this.opcode("emptyHash")}return A}};function s(z,A,B){if(z==null||(typeof z!=="string"&&z.constructor!==B.AST.ProgramNode)){throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+z)}A=A||{};if(!("data" in A)){A.data=true}var y=B.parse(z);var x=new B.Compiler().compile(y,A);return new B.JavaScriptCompiler().compile(x,A)}v.precompile=s;function u(x,y,z){if(x==null||(typeof x!=="string"&&x.constructor!==z.AST.ProgramNode)){throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+x)}y=y||{};if(!("data" in y)){y.data=true}var B;function A(){var E=z.parse(x);var D=new z.Compiler().compile(E,y);var C=new z.JavaScriptCompiler().compile(D,y,undefined,true);return z.template(C)}return function(D,C){if(!B){B=A()}return B.call(this,D,C)}}v.compile=u;return v})(d);var j=(function(z,C){var B;var r=z.COMPILER_REVISION;var v=z.REVISION_CHANGES;var w=z.log;var x=C;function t(E){this.value=E}function D(){}D.prototype={nameLookup:function(H,F){var G,E;if(H.indexOf("depth")===0){G=true}if(/^[0-9]+$/.test(F)){E=H+"["+F+"]"}else{if(D.isValidJavaScriptVariableName(F)){E=H+"."+F}else{E=H+"['"+F+"']"}}if(G){return"("+H+" && "+E+")"}else{return E}},compilerInfo:function(){var F=r,E=v[F];return"this.compilerInfo = ["+F+",'"+E+"'];\n"},appendToBuffer:function(E){if(this.environment.isSimple){return"return "+E+";"}else{return{appendToBuffer:true,content:E,toString:function(){return"buffer += "+E+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(E,G,I,H){this.environment=E;this.options=G||{};w("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!I;this.context=I||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(E,G);var K=E.opcodes,J;this.i=0;for(var F=K.length;this.i<F;this.i++){J=K[this.i];if(J.opcode==="DECLARE"){this[J.name]=J.value}else{this[J.opcode].apply(this,J.args)}if(J.opcode!==this.stripNext){this.stripNext=false}}this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new x("Compile completed with content left on stack")}return this.createFunctionContext(H)},preamble:function(){var E=[];if(!this.isChild){var F=this.namespace;var G="helpers = this.merge(helpers, "+F+".helpers);";if(this.environment.usePartial){G=G+" partials = this.merge(partials, "+F+".partials);"}if(this.options.data){G=G+" data = data || {};"}E.push(G)}else{E.push("")}if(!this.environment.isSimple){E.push(", buffer = "+this.initializeBuffer())}else{E.push("")}this.lastContext=0;this.source=E},createFunctionContext:function(I){var K=this.stackVars.concat(this.registers.list);if(K.length>0){this.source[1]=this.source[1]+", "+K.join(", ")}if(!this.isChild){for(var H in this.context.aliases){if(this.context.aliases.hasOwnProperty(H)){this.source[1]=this.source[1]+", "+H+"="+this.context.aliases[H]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.pushSource("return buffer;")}var L=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var G=0,E=this.environment.depths.list.length;G<E;G++){L.push("depth"+this.environment.depths.list[G])}var J=this.mergeSource();if(!this.isChild){J=this.compilerInfo()+J}if(I){L.push(J);return Function.apply(this,L)}else{var F="function "+(this.name||"")+"("+L.join(",")+") {\n  "+J+"}";w("debug",F+"\n\n");return F}},mergeSource:function(){var I="",G;for(var H=0,E=this.source.length;H<E;H++){var F=this.source[H];if(F.appendToBuffer){if(G){G=G+"\n    + "+F.content}else{G=F.content}}else{if(G){I+="buffer += "+G+";\n  ";G=undefined}I+=F+"\n  "}}return I},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var E=["depth0"];this.setupParams(0,E);this.replaceStack(function(F){E.splice(1,0,F);return"blockHelperMissing.call("+E.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var F=["depth0"];this.setupParams(0,F);var E=this.topStack();F.splice(1,0,E);this.pushSource("if (!"+this.lastHelper+") { "+E+" = blockHelperMissing.call("+F.join(", ")+"); }")},appendContent:function(E){if(this.pendingContent){E=this.pendingContent+E}if(this.stripNext){E=E.replace(/^\s+/,"")}this.pendingContent=E},strip:function(){if(this.pendingContent){this.pendingContent=this.pendingContent.replace(/\s+$/,"")}this.stripNext="strip"},append:function(){this.flushInline();var E=this.popStack();this.pushSource("if("+E+" || "+E+" === 0) { "+this.appendToBuffer(E)+" }");if(this.environment.isSimple){this.pushSource("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(E){if(this.lastContext!==E){this.lastContext=E}},lookupOnContext:function(E){this.push(this.nameLookup("depth"+this.lastContext,E,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(E){return"typeof "+E+" === functionType ? "+E+".apply(depth0) : "+E})},lookup:function(E){this.replaceStack(function(F){return F+" == null || "+F+" === false ? "+F+" : "+this.nameLookup(F,E,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(E,F){this.pushStackLiteral("depth"+this.lastContext);this.pushString(F);if(F!=="sexpr"){if(typeof E==="string"){this.pushString(E)}else{this.pushStackLiteral(E)}}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.push("{}");this.push("{}")}},pushHash:function(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[]}},popHash:function(){var E=this.hash;this.hash=this.hashes.pop();if(this.options.stringParams){this.push("{"+E.contexts.join(",")+"}");this.push("{"+E.types.join(",")+"}")}this.push("{\n    "+E.values.join(",\n    ")+"\n  }")},pushString:function(E){this.pushStackLiteral(this.quotedString(E))},push:function(E){this.inlineStack.push(E);return E},pushLiteral:function(E){this.pushStackLiteral(E)},pushProgram:function(E){if(E!=null){this.pushStackLiteral(this.programExpression(E))}else{this.pushStackLiteral(null)}},invokeHelper:function(I,F,E){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var G=this.lastHelper=this.setupHelper(I,F,true);var J=this.nameLookup("depth"+this.lastContext,F,"context");var H="helper = "+G.name+" || "+J;if(G.paramsInit){H+=","+G.paramsInit}this.push("("+H+",helper ? helper.call("+G.callParams+") : helperMissing.call("+G.helperMissingParams+"))");if(!E){this.flushInline()}},invokeKnownHelper:function(G,E){var F=this.setupHelper(G,E);this.push(F.name+".call("+F.callParams+")")},invokeAmbiguous:function(E,I){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var F=this.setupHelper(0,E,I);var G=this.lastHelper=this.nameLookup("helpers",E,"helper");var J=this.nameLookup("depth"+this.lastContext,E,"context");var H=this.nextStack();if(F.paramsInit){this.pushSource(F.paramsInit)}this.pushSource("if (helper = "+G+") { "+H+" = helper.call("+F.callParams+"); }");this.pushSource("else { helper = "+J+"; "+H+" = typeof helper === functionType ? helper.call("+F.callParams+") : helper; }")},invokePartial:function(E){var F=[this.nameLookup("partials",E,"partial"),"'"+E+"'",this.popStack(),"helpers","partials"];if(this.options.data){F.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+F.join(", ")+")")},assignToHash:function(F){var H=this.popStack(),E,G;if(this.options.stringParams){G=this.popStack();E=this.popStack()}var I=this.hash;if(E){I.contexts.push("'"+F+"': "+E)}if(G){I.types.push("'"+F+"': "+G)}I.values.push("'"+F+"': ("+H+")")},compiler:D,compileChildren:function(E,H){var J=E.children,L,K;for(var I=0,F=J.length;I<F;I++){L=J[I];K=new this.compiler();var G=this.matchExistingProgram(L);if(G==null){this.context.programs.push("");G=this.context.programs.length;L.index=G;L.name="program"+G;this.context.programs[G]=K.compile(L,H,this.context);this.context.environments[G]=L}else{L.index=G;L.name="program"+G}}},matchExistingProgram:function(H){for(var G=0,F=this.context.environments.length;G<F;G++){var E=this.context.environments[G];if(E&&E.equals(H)){return G}}},programExpression:function(F){this.context.aliases.self="this";if(F==null){return"self.noop"}var K=this.environment.children[F],J=K.depths.list,I;var H=[K.index,K.name,"data"];for(var G=0,E=J.length;G<E;G++){I=J[G];if(I===1){H.push("depth0")}else{H.push("depth"+(I-1))}}return(J.length===0?"self.program(":"self.programWithDepth(")+H.join(", ")+")"},register:function(E,F){this.useRegister(E);this.pushSource(E+" = "+F+";")},useRegister:function(E){if(!this.registers[E]){this.registers[E]=true;this.registers.list.push(E)}},pushStackLiteral:function(E){return this.push(new t(E))},pushSource:function(E){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(E){this.source.push(E)}},pushStack:function(F){this.flushInline();var E=this.incrStack();if(F){this.pushSource(E+" = "+F+";")}this.compileStack.push(E);return E},replaceStack:function(L){var G="",H=this.isInline(),K,F,I;if(H){var J=this.popStack(true);if(J instanceof t){K=J.value;I=true}else{F=!this.stackSlot;var E=!F?this.topStackName():this.incrStack();G="("+this.push(E)+" = "+J+"),";K=this.topStack()}}else{K=this.topStack()}var M=L.call(this,K);if(H){if(!I){this.popStack()}if(F){this.stackSlot--}this.push("("+G+M+")")}else{if(!/^stack/.test(K)){K=this.nextStack()}this.pushSource(K+" = ("+G+M+");")}return K},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var G=this.inlineStack;if(G.length){this.inlineStack=[];for(var F=0,E=G.length;F<E;F++){var H=G[F];if(H instanceof t){this.compileStack.push(H)}else{this.pushStack(H)}}}},isInline:function(){return this.inlineStack.length},popStack:function(E){var G=this.isInline(),F=(G?this.inlineStack:this.compileStack).pop();if(!E&&(F instanceof t)){return F.value}else{if(!G){if(!this.stackSlot){throw new x("Invalid stack pop")}this.stackSlot--}return F}},topStack:function(F){var E=(this.isInline()?this.inlineStack:this.compileStack),G=E[E.length-1];if(!F&&(G instanceof t)){return G.value}else{return G}},quotedString:function(E){return'"'+E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(I,G,F){var H=[],J=this.setupParams(I,H,F);var E=this.nameLookup("helpers",G,"helper");return{params:H,paramsInit:J,name:E,callParams:["depth0"].concat(H).join(", "),helperMissingParams:F&&["depth0",this.quotedString(G)].concat(H).join(", ")}},setupOptions:function(G,F){var M=[],J=[],L=[],E,H,K;M.push("hash:"+this.popStack());if(this.options.stringParams){M.push("hashTypes:"+this.popStack());M.push("hashContexts:"+this.popStack())}H=this.popStack();K=this.popStack();if(K||H){if(!K){this.context.aliases.self="this";K="self.noop"}if(!H){this.context.aliases.self="this";H="self.noop"}M.push("inverse:"+H);M.push("fn:"+K)}for(var I=0;I<G;I++){E=this.popStack();F.push(E);if(this.options.stringParams){L.push(this.popStack());J.push(this.popStack())}}if(this.options.stringParams){M.push("contexts:["+J.join(",")+"]");M.push("types:["+L.join(",")+"]")}if(this.options.data){M.push("data:data")}return M},setupParams:function(H,G,F){var E="{"+this.setupOptions(H,G).join(",")+"}";if(F){this.useRegister("options");G.push("options");return"options="+E}else{G.push(E);return""}}};var s=("break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield").split(" ");var A=D.RESERVED_WORDS={};for(var y=0,u=s.length;y<u;y++){A[s[y]]=true}D.isValidJavaScriptVariableName=function(E){if(!D.RESERVED_WORDS[E]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(E)){return true}return false};B=D;return B})(l,d);var c=(function(A,F,s,w,z){var C;var r=A;var y=F;var v=s.parser;var u=s.parse;var B=w.Compiler;var E=w.compile;var t=w.precompile;var G=z;var D=r.create;var x=function(){var H=D();H.compile=function(I,J){return E(I,J,H)};H.precompile=function(I,J){return t(I,J,H)};H.AST=y;H.Compiler=B;H.JavaScriptCompiler=G;H.Parser=v;H.parse=u;return H};r=x();r.create=x;C=r;return C})(g,m,q,f,j);return c})();(function(O,q,ab){var P={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:false,returnFocus:true,reposition:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined},C="colorbox",X="cbox",w=X+"Element",aa=X+"_open",f=X+"_load",Z=X+"_complete",z=X+"_cleanup",ah=X+"_closed",l=X+"_purge",A=!O.support.leadingWhitespace,ak=A&&!ab.XMLHttpRequest,af=X+"_IE6",V,al,am,d,M,u,b,U,c,ae,S,o,j,t,y,ac,x,W,E,G,aj,an,r,h,a,B,N,s,I,ad,R,F,Q,ai="div",ag;function L(ao,ar,aq){var ap=q.createElement(ao);if(ar){ap.id=X+ar}if(aq){ap.style.cssText=aq}return O(ap)}function J(ap){var ao=c.length,aq=(N+ap)%ao;return(aq<0)?ao+aq:aq}function T(ao,ap){return Math.round((/%/.test(ao)?((ap==="x"?ae.width():ae.height())/100):1)*parseInt(ao,10))}function H(ao){return aj.photo||/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i.test(ao)}function Y(){var ao,ap=O.data(B,C);if(ap==null){aj=O.extend({},P);if(console&&console.log){console.log("Error: cboxElement missing settings object")}}else{aj=O.extend({},ap)}for(ao in aj){if(O.isFunction(aj[ao])&&ao.slice(0,2)!=="on"){aj[ao]=aj[ao].call(B)}}aj.rel=aj.rel||B.rel||O(B).data("rel")||"nofollow";aj.href=aj.href||O(B).attr("href");aj.title=aj.title||B.title;if(typeof aj.href==="string"){aj.href=O.trim(aj.href)}}function K(ao,ap){O(q).trigger(ao);O("*",al).trigger(ao);if(ap){ap.call(B)}}function D(){var ao,aq=X+"Slideshow_",ar="click."+X,at,ap;if(aj.slideshow&&c[1]){at=function(){ac.html(aj.slideshowStop).unbind(ar).bind(Z,function(){if(aj.loop||c[N+1]){ao=setTimeout(Q.next,aj.slideshowSpeed)}}).bind(f,function(){clearTimeout(ao)}).one(ar+" "+z,ap);al.removeClass(aq+"off").addClass(aq+"on");ao=setTimeout(Q.next,aj.slideshowSpeed)};ap=function(){clearTimeout(ao);ac.html(aj.slideshowStart).unbind([Z,f,z,ar].join(" ")).one(ar,function(){Q.next();at()});al.removeClass(aq+"on").addClass(aq+"off")};if(aj.slideshowAuto){at()}else{ap()}}else{al.removeClass(aq+"off "+aq+"on")}}function g(ao){if(!R){B=ao;Y();c=O(B);N=0;if(aj.rel!=="nofollow"){c=O("."+w).filter(function(){var aq=O.data(this,C),ap;if(aq){ap=O(this).data("rel")||aq.rel||this.rel}return(ap===aj.rel)});N=c.index(B);if(N===-1){c=c.add(B);N=c.length-1}}if(!I){I=ad=true;al.show();if(aj.returnFocus){O(B).blur();O(q).one(ah,function(){O(B).focus()})}V.css({opacity:+aj.opacity,cursor:aj.overlayClose?"pointer":"auto"}).show();aj.w=T(aj.initialWidth,"x");aj.h=T(aj.initialHeight,"y");Q.position();if(ak){ae.bind("resize."+af+" scroll."+af,function(){V.css({width:ae.width(),height:ae.height(),top:ae.scrollTop(),left:ae.scrollLeft()})}).trigger("resize."+af)}K(aa,aj.onOpen);G.add(t).hide();E.html(aj.close).show()}Q.load(true)}}function v(){if(!al&&q.body){ag=false;ae=O(ab);al=L(ai).attr({id:C,"class":A?X+(ak?"IE6":"IE"):""}).hide();V=L(ai,"Overlay",ak?"position:absolute":"").hide();j=L(ai,"LoadingOverlay").add(L(ai,"LoadingGraphic"));am=L(ai,"Wrapper");d=L(ai,"Content").append(S=L(ai,"LoadedContent","width:0; height:0; overflow:hidden"),t=L(ai,"Title"),y=L(ai,"Current"),x=L(ai,"Next"),W=L(ai,"Previous"),ac=L(ai,"Slideshow").bind(aa,D),E=L(ai,"Close"));am.append(L(ai).append(L(ai,"TopLeft"),M=L(ai,"TopCenter"),L(ai,"TopRight")),L(ai,false,"clear:left").append(u=L(ai,"MiddleLeft"),d,b=L(ai,"MiddleRight")),L(ai,false,"clear:left").append(L(ai,"BottomLeft"),U=L(ai,"BottomCenter"),L(ai,"BottomRight"))).find("div div").css({"float":"left"});o=L(ai,false,"position:absolute; width:9999px; visibility:hidden; display:none");G=x.add(W).add(y).add(ac);O(q.body).append(V,al.append(am,o))}}function m(){if(al){if(!ag){ag=true;an=M.height()+U.height()+d.outerHeight(true)-d.height();r=u.width()+b.width()+d.outerWidth(true)-d.width();h=S.outerHeight(true);a=S.outerWidth(true);x.click(function(){Q.next()});W.click(function(){Q.prev()});E.click(function(){Q.close()});V.click(function(){if(aj.overlayClose){Q.close()}});O(q).bind("keydown."+X,function(ap){var ao=ap.keyCode;if(I&&aj.escKey&&ao===27){ap.preventDefault();Q.close()}if(I&&aj.arrowKey&&c[1]){if(ao===37){ap.preventDefault();W.click()}else{if(ao===39){ap.preventDefault();x.click()}}}});O(q).delegate("."+w,"click",function(ao){if(!(ao.which>1||ao.shiftKey||ao.altKey||ao.metaKey)){ao.preventDefault();g(this)}})}return true}return false}if(O.colorbox){return}O(v);Q=O.fn[C]=O[C]=function(ao,aq){var ap=this;ao=ao||{};v();if(m()){if(O.isFunction(ap)){ap=O("<a/>");ao.open=true}else{if(!ap[0]){return ap}}if(aq){ao.onComplete=aq}ap.each(function(){O.data(this,C,O.extend({},O.data(this,C)||P,ao))}).addClass(w);if((O.isFunction(ao.open)&&ao.open.call(ap))||ao.open){g(ap[0])}}return ap};Q.position=function(aq,at){var av,ax=0,ap=0,au=al.offset(),ao,ar;ae.unbind("resize."+X);al.css({top:-90000,left:-90000});ao=ae.scrollTop();ar=ae.scrollLeft();if(aj.fixed&&!ak){au.top-=ao;au.left-=ar;al.css({position:"fixed"})}else{ax=ao;ap=ar;al.css({position:"absolute"})}if(aj.right!==false){ap+=Math.max(ae.width()-aj.w-a-r-T(aj.right,"x"),0)}else{if(aj.left!==false){ap+=T(aj.left,"x")}else{ap+=Math.round(Math.max(ae.width()-aj.w-a-r,0)/2)}}if(aj.bottom!==false){ax+=Math.max(ae.height()-aj.h-h-an-T(aj.bottom,"y"),0)}else{if(aj.top!==false){ax+=T(aj.top,"y")}else{ax+=Math.round(Math.max(ae.height()-aj.h-h-an,0)/2)}}al.css({top:au.top,left:au.left});aq=(al.width()===aj.w+a&&al.height()===aj.h+h)?0:aq||0;am[0].style.width=am[0].style.height="9999px";function aw(ay){M[0].style.width=U[0].style.width=d[0].style.width=(parseInt(ay.style.width,10)-r)+"px";d[0].style.height=u[0].style.height=b[0].style.height=(parseInt(ay.style.height,10)-an)+"px"}av={width:aj.w+a+r,height:aj.h+h+an,top:ax,left:ap};if(aq===0){al.css(av)}al.dequeue().animate(av,{duration:aq,complete:function(){aw(this);ad=false;am[0].style.width=(aj.w+a+r)+"px";am[0].style.height=(aj.h+h+an)+"px";if(aj.reposition){setTimeout(function(){ae.bind("resize."+X,Q.position)},1)}if(at){at()}},step:function(){aw(this)}})};Q.resize=function(ao){if(I){ao=ao||{};if(ao.width){aj.w=T(ao.width,"x")-a-r}if(ao.innerWidth){aj.w=T(ao.innerWidth,"x")}S.css({width:aj.w});if(ao.height){aj.h=T(ao.height,"y")-h-an}if(ao.innerHeight){aj.h=T(ao.innerHeight,"y")}if(!ao.innerHeight&&!ao.height){S.css({height:"auto"});aj.h=S.height()}S.css({height:aj.h});Q.position(aj.transition==="none"?0:aj.speed)}};Q.prep=function(ap){if(!I){return}var at,aq=aj.transition==="none"?0:aj.speed;S.remove();S=L(ai,"LoadedContent").append(ap);function ao(){aj.w=aj.w||S.width();aj.w=aj.mw&&aj.mw<aj.w?aj.mw:aj.w;return aj.w}function ar(){aj.h=aj.h||S.height();aj.h=aj.mh&&aj.mh<aj.h?aj.mh:aj.h;return aj.h}S.hide().appendTo(o.show()).css({width:ao(),overflow:aj.scrolling?"auto":"hidden"}).css({height:ar()}).prependTo(d);o.hide();O(s).css({"float":"none"});at=function(){var ay=c.length,aw,ax="frameBorder",au="allowTransparency",av;if(!I){return}function az(){if(A){al[0].style.removeAttribute("filter")}}av=function(){clearTimeout(F);j.detach().hide();K(Z,aj.onComplete)};if(A){if(s){S.fadeIn(100)}}t.html(aj.title).add(S).show();if(ay>1){if(typeof aj.current==="string"){y.html(aj.current.replace("{current}",N+1).replace("{total}",ay)).show()}x[(aj.loop||N<ay-1)?"show":"hide"]().html(aj.next);W[(aj.loop||N)?"show":"hide"]().html(aj.previous);if(aj.slideshow){ac.show()}if(aj.preloading){O.each([J(-1),J(1)],function(){var aD,aA,aB=c[this],aC=O.data(aB,C);if(aC&&aC.href){aD=aC.href;if(O.isFunction(aD)){aD=aD.call(aB)}}else{aD=aB.href}if(H(aD)){aA=new Image();aA.src=aD}})}}else{G.hide()}if(aj.iframe){aw=L("iframe")[0];if(ax in aw){aw[ax]=0}if(au in aw){aw[au]="true"}if(!aj.scrolling){aw.scrolling="no"}O(aw).attr({src:aj.href,name:(new Date()).getTime(),"class":X+"Iframe",allowFullScreen:true,webkitAllowFullScreen:true,mozallowfullscreen:true}).one("load",av).appendTo(S);O(q).one(l,function(){aw.src="//about:blank"});if(aj.fastIframe){O(aw).trigger("load")}}else{av()}if(aj.transition==="fade"){al.fadeTo(aq,1,az)}else{az()}};if(aj.transition==="fade"){al.fadeTo(aq,0,function(){Q.position(0,at)})}else{Q.position(aq,at)}};Q.load=function(ar){var aq,at,ap=Q.prep,ao;ad=true;s=false;B=c[N];if(!ar){Y()}K(l);K(f,aj.onLoad);aj.h=aj.height?T(aj.height,"y")-h-an:aj.innerHeight&&T(aj.innerHeight,"y");aj.w=aj.width?T(aj.width,"x")-a-r:aj.innerWidth&&T(aj.innerWidth,"x");aj.mw=aj.w;aj.mh=aj.h;if(aj.maxWidth){aj.mw=T(aj.maxWidth,"x")-a-r;aj.mw=aj.w&&aj.w<aj.mw?aj.w:aj.mw}if(aj.maxHeight){aj.mh=T(aj.maxHeight,"y")-h-an;aj.mh=aj.h&&aj.h<aj.mh?aj.h:aj.mh}aq=aj.href;F=setTimeout(function(){j.show().appendTo(d)},100);if(aj.inline){ao=L(ai).hide().insertBefore(O(aq)[0]);O(q).one(l,function(){ao.replaceWith(S.children())});ap(O(aq))}else{if(aj.iframe){ap(" ")}else{if(aj.html){ap(aj.html)}else{if(H(aq)){O(s=new Image()).addClass(X+"Photo").bind("error",function(){aj.title=false;ap(L(ai,"Error").html(aj.imgError))}).load(function(){var au;s.onload=null;if(aj.scalePhotos){at=function(){s.height-=s.height*au;s.width-=s.width*au};if(aj.mw&&s.width>aj.mw){au=(s.width-aj.mw)/s.width;at()}if(aj.mh&&s.height>aj.mh){au=(s.height-aj.mh)/s.height;at()}}if(aj.h){s.style.marginTop=Math.max(aj.h-s.height,0)/2+"px"}if(c[1]&&(aj.loop||c[N+1])){s.style.cursor="pointer";s.onclick=function(){Q.next()}}if(A){s.style.msInterpolationMode="bicubic"}setTimeout(function(){ap(s)},1)});setTimeout(function(){s.src=aq},1)}else{if(aq){o.load(aq,aj.data,function(av,au){ap(au==="error"?L(ai,"Error").html(aj.xhrError):O(this).contents())})}}}}}};Q.next=function(){if(!ad&&c[1]&&(aj.loop||c[N+1])){N=J(1);Q.load()}};Q.prev=function(){if(!ad&&c[1]&&(aj.loop||N)){N=J(-1);Q.load()}};Q.close=function(){if(I&&!R){R=true;I=false;K(z,aj.onCleanup);ae.unbind("."+X+" ."+af);var ao=aj.transition==="none"?0:aj.speed;V.fadeTo(ao,0);al.stop().fadeTo(ao,0,function(){al.add(V).css({opacity:1,cursor:"auto"}).hide();K(l);S.remove();setTimeout(function(){R=false;K(ah,aj.onClosed)},1)})}};Q.remove=function(){O([]).add(al).add(V).remove();al=null;O("."+w).removeData(C).removeClass(w);O(q).undelegate("."+w)};Q.element=function(){return O(B)};Q.settings=P}(jQuery,document,window));var UrlPre="";jQuery(document).ready(function(a){cbox={classList:["pictureservices","videoservices","ogvideo","iframeembed","plink"],cbox_txtw:300,plink_txtw:468,maxw_padding:50,maxw:0,minw_scale:0.4,minw:0,minw_thresh:400,minh_scale:0.75,minh:0,maxh:0,boxh:0,scrollbarWidth:null,cboxTmpl:null,cboxVideoTmpl:null,cboxPlinkTmpl:null,cboxLeftTmpl:null,cboxLeftVideoTmpl:null,cboxLeftPlurkTmpl:null,cboxHeaderTmpl:null,cboxRespTmpl:null,mobile_mode:false,cancelLoading:false,session_uid:null,respLoadNum:20,curPlurkObj:null,curSessionObj:null,$body:a("body"),initTmpl:function(){var l="<div class='cbox_left' style='width:{{imgBoxW}}px; height:{{imgBoxH}}px; overflow-y:{{scrollbar}}'><div class='imgUrl'><img class='cbox_img' src='{{imgUrl}}' width='{{imgWidth}}' height='{{imgHeight}}' style='margin-top:{{imgTop}}px;' /><a target='_blank' href='{{linkUrl}}' style='max-width:{{urlMaxWidth}}px;{{mobileUrl}}'>{{linkUrl}}</a></div></div>";var j="<div class='cbox_left' style='width:{{imgBoxW}}px; height:{{videoBoxH}}px; overflow-y:{{scrollbar}}'><iframe width='{{imgWidth}}' height='{{imgHeight}}' src='{{iframeUrl}}' data-loopUrl='{{loopUrl}}' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen style='margin-top:{{imgTop}}px;'></iframe><a class='hideVideo' href='javascript:void(0)' data-videoTitle='{{videoTitle}}'>"+_("Hide video and play in background")+"</a><a class='openInExternalWindow' href='{{linkUrl}}' target='_blank'>"+_("Open in external window")+"</a></div>";var h="<div class='cbox_right {{cls_scrollbar}}' style='width:{{txtw}}px;height:100%'><div class='control'><a target='_blank' class='cbox_report_abuse' href='/Abuse/report/plurk/{{plurkUrl}}' title='"+_("Report abuse")+"'><i class='pif-warning'></i></a><a href='/p/{{plurkUrl}}' class='cbox_perma_link' target='_blank' title='"+_("Open in external window")+"'><i class='pif-outlink'></i></a><a class='cbox_close'><i class='pif-cancel'></i></a></div><div class='cbox_plurk_main' class='empty'></div><div class='cbox_response'><div class='response_inbox'></div></div>"+function(){if(cbox.session_uid&&window.PlurkAdder){return"<div class='quick_reply hide'><textarea class='quick_reply_text' required maxlength='210' placeholder='"+_("Quick reply")+"'></textarea></div>"}else{return""}}()+"<div class='cbox_ads'></div></div>";var d="<div class='cbox_plurk_main plurk cboxAnchor' data-pid='{{pid}}' data-uid='{{uid}}'><div class='avatar'><a target='_blank' href='/{{user_nick}}'><img alt='' src='{{avatar}}'> </a></div><div class='user'><a class='user-nick' target='_blank' href='/{{user_nick}}' style='color:#{{name_color}};'>{{display_name}}</a><span class='qualifier q_{{qualifier}}'>{{qualifier_translated}}</span></div><div class='content'>{{{plurk_Ctnt}}}</div></div>";var g="<div class='cbox_plurk plurk cboxAnchor {{classStr}}' data-pid='{{pid}}' data-uid='{{uid}}' data-rid='{{rid}}'><div class='avatar'><a target='_blank' href='/{{user_nick}}'><img alt='' src='{{avatar}}'> </a></div><div class='maincontent'><div class='user'><a class='user-nick' target='_blank' href='/{{user_nick}}' style='color:#{{name_color}};'>{{display_name}}</a><span class='qualifier q_{{qualifier}}'>{{qualifier_translated}}</span></div><div class='content'>{{{plurk_Ctnt}}}</div></div></div>";var c="<div id='music_player'><span>{{videoTitle}}</span><a class='ctrl_stop' href='javascript:void(0)'>"+_("Stop")+"</a><a class='ctrl_show' href='javascript:void(0)'>"+_("Show video")+"</a><span class='tmpVideo'></span>";"</div>";var f,b;if(cbox.mobile_mode){f=l}else{f=l+h;b=j+h;cbox.cboxLeftVideoTmpl=Handlebars.compile(j);cbox.cboxVideoTmpl=Handlebars.compile(b);cbox.videoHideTmpl=Handlebars.compile(c);cbox.cboxPlinkTmpl=Handlebars.compile(h);cbox.cboxLeftTmpl=Handlebars.compile(l);cbox.cboxHeaderTmpl=Handlebars.compile(d);cbox.cboxRespTmpl=Handlebars.compile(g)}cbox.cboxTmpl=Handlebars.compile(f)},init:function(){var c=this.$body;cbox.scrollbarWidth=cbox.calcScrollbarWidth();cbox.mobile_mode=function(){var f=jQuery(window).innerWidth();if(f<=(cbox.minw_thresh+cbox.cbox_txtw)){cbox.cbox_txtw=0;cbox.maxw_padding=0;return true}else{return false}}();cbox.session_uid=function(){var f=window.PLURK||window.GLOBAL||null;if(f){if(f.session&&f.session.user){cbox.curSessionObj=f.session.user}else{if(f.session_user){cbox.curSessionObj=f.session_user}}}return(cbox.curSessionObj)?cbox.curSessionObj.id:null}();window.PlurkAdder=window.PlurkAdder||{plurkRespAdd:cbox.plurkRespAdd};cbox.initTmpl();var b=a("#cboxOverlay");b.click(function(){cbox.cancelLoading=true;c.removeClass("cboxLoading")});c.on("click","",function(h){if(!(c.hasClass("cboxOpen")||c.hasClass("cboxVideo")||c.hasClass("cboxPlink"))){return}var g=h.target;var f=a("#colorbox, #colorboxVideo");if(a(".cbox_close").has(g).length>0||(!f.is(g)&&(f.has(g).length==0||a(g).hasClass("cbox_img")))){cbox.close();return false}if((!cbox.mobile_mode)&&(a(h.target).parents(".cbox_plurk").hasClass("withimage"))){a(h.target).parents(".cbox_plurk").find("a.pictureservices:first").click();return false}});c.on("keydown",function(g){if(!(c.hasClass("cboxOpen")||c.hasClass("cboxVideo")||c.hasClass("cboxPlink"))){return}if(g.keyCode==27){cbox.close();return false}if(g.keyCode==13){var f=jQuery(g.target);if(f.hasClass("quick_reply_text")){cbox.quickReply(f);return false}}});var d="."+cbox.classList.join(", .");c.on("click",d,cbox.clickHandler);c.on("dblclick",".banana_plurk .videoservice, .banana_plurk .ogvideo, .banana_plurk .iframeembed",cbox.clickHandler);c.on("dblclick",".banana_plurk .pictureservices",cbox.clickHandler);c.on("dblclick",".banana_plurk .plink",cbox.clickHandler);c.on("click","a.hideVideo",cbox.hideVideo);c.on("click","img.emoticon",cbox.xmasHandler)},xmasHandler:function(l){var b=480;var r=640;var j=4203050;var o="";var q="kmtskj";var c=[{videoID:"6c7er254_nI",title:"Jacob Miller & Ray I - Wish You A Merry Christmas"},{videoID:"SnA52s7qceM",title:"Michael Bublé - Santa Claus Is Coming To Town",width:853},{videoID:"tKFMLmbpNys",title:"Happy Xmas (War Is Over)",width:853},{videoID:"CxV3s7ew2VI",title:"Amazing Grace - Hayley Westenra",width:853},{videoID:"E8gmARGvPlI",title:"Wham! - Last Christmas"},{videoID:"yXQViqx6GMY",title:"Mariah Carey - All I Want For Christmas Is You"},{videoID:"cmyCM1tz_NE",title:"Silent Night - Hayley Westenra",width:853},{videoID:"6I7RKxOL6gk",title:"Celine Dion - And So This Is Christmas"}];var g=a(l.target).attr("alt");if(/\(xmas\d+\)/i.test(g)){_gaq_push(["_trackEvent","timeline_emo_click","xmas",g]);var m={pid:parseInt(q,36),rid:o,uid:j,plurkUrl:"/p/"+q};var f={height:b,width:r};var h=-1;if(GLOBAL){if(GLOBAL.session_user){if(GLOBAL.session_user.default_lang=="tr_ch"){h=0}}}var d=c[Math.floor(Math.random()*(c.length+h))];m.linkUrl="https://www.youtube.com/watch?v="+d.videoID;if(d.height){f.height=d.height}if(d.width){f.width=d.width}f.iframeUrl="https://www.youtube.com/v/"+d.videoID+"?version=3&autohide=1&autoplay=1&loop=1";f.loopUrl="https://www.youtube.com/v/"+d.videoID+"?version=3&autohide=1&autoplay=1&loop=1&playlist="+d.videoID;f.title=d.title;if(cbox.mobile_mode){window.open(m.linkUrl);return false}cbox.$body.addClass("cboxLoading");cbox.initVariable();cbox.cancelLoading=false;cbox.renderCbox(m,null,f);return false}},quickReply:function(b){var c=b.val();if(!c){return}b.disabled==true;jQuery.when(PlurkAdder.plurkRespAdd(cbox.curPlurkObj,c,null)).done(function(d){cbox.appendSingleResp(cbox.curPlurkObj,d.object,cbox.curSessionObj,d.object.id,true);cbox.scrollToCurrent();b.val("").css("height","1.85em");if(cbox.$body.hasClass("timeline")&&window.Responses){Responses.addToList(d.object)}}).fail(function(){var d=this["msg"];if(d){alert(d)}}).always(function(){b.disabled=false})},close:function(){var c=this.$body;var b=c.hasClass("cboxVideo");try{TinyEmoAdder.remove()}catch(d){}if(b){cbox.closeVideo()}else{c.removeClass("cboxOpen").removeClass("cboxPlink");jQuery.colorbox.close()}},hideVideo:function(){var d=cbox.$body;var g=a(this).attr("data-videotitle");if(g.length>30){g=g.substr(0,30)+"..."}var f=d.find("#colorboxVideo .cbox_left iframe");if(f.data("loopurl")!=""){if(f.data("loopurl")!=f.attr("src")){f.attr("src",f.data("loopurl"))}}var c=a(cbox.videoHideTmpl({videoTitle:g}));a(c).on("click",".ctrl_stop",function(){cbox.hideVideoClose();return false}).on("click",".ctrl_show",function(){cbox.hideVideoShow();return false}).appendTo("#layout_content");d.addClass("cboxHide").removeClass("cboxVideo");if(a("#timeline_holder").length){var b=function(){a(c).css("top",a("#timeline_holder").height())};b();a(window).on("resize.music_player",function(){b()})}return false},hideVideoShow:function(){a(window).off("resize.music_player");if(!cbox.$body.hasClass("cboxHide")){return}cbox.$body.removeClass("cboxHide").addClass("cboxVideo");a("#music_player").remove()},hideVideoClose:function(){a(window).off("resize.music_player");if(!cbox.$body.hasClass("cboxHide")){return}cbox.$body.removeClass("cboxHide");a("#colorboxVideo").remove();a("#music_player").remove()},closeVideo:function(){this.$body.removeClass("cboxVideo");this.$body.find("#colorboxVideo").hide(0,function(){a(this).remove()})},clickHandler:function(q){var j=cbox.$body;cbox.initVariable();cbox.cancelLoading=false;var r=a(this);var f=a(q.target);if(r.hasClass("plink")&&f.hasClass("ex_link")&&!f.hasClass("plink")){if(q.target.href){window.open(q.target.href)}return false}else{if(f.parents(".user").length||f.parents(".avatar").length){return}}var h=r.hasClass("cboxAnchor")?r:r.parents(".cboxAnchor");if(h.length==0){return}var o=h.data("pid");var c=r.attr("href");if(c&&c.indexOf("moyi.io/")!=-1&&r.data("pid")){o=r.data("pid")}var s=parseInt(o).toString(36);if(cbox.mobile_mode&&!j.hasClass("hotlinks")&&!r.hasClass("pictureservices")){if(r.hasClass("plink")&&r.attr("href")==null){window.open("/p/"+s)}else{window.open(r.attr("href"))}return false}if(c&&c.indexOf("moyi.io/")!=-1){window.open(c);return false}j.addClass("cboxLoading");var b=r.find("img");var t={pid:o,uid:h.data("uid"),rid:h.data("rid"),respCount:h.data("respcount"),linkUrl:c,imgUrl:b.attr("alt")||c,plurkUrl:s,isAds:h.hasClass("banana_plurk")};if(r.hasClass("pictureservices")){var l=a("<img>").each(function(){if(this.complete){a(this).trigger("load")}}).one("load",function(){if(cbox.cancelLoading){return}var u=cbox.scaleImage(this);cbox.renderCbox(t,u)}).attr("src",t.imgUrl)}else{if(r.hasClass("ogvideo")||r.hasClass("videoservices")||r.hasClass("iframeembed")){if(r.hasClass("videoservices")){var d=r.data("videoObj")}else{var d={iframeUrl:b.data("video")||t.linkUrl,siteTag:b.data("site"),width:b.data("width")||640,height:b.data("height")||480,title:r.text()}}var g=cbox.videoUrlFix(d.iframeUrl,d.siteTag);if(!g[0]){j.removeClass("cboxLoading");window.open(c);return false}d.iframeUrl=g[0];d.loopUrl=g[1];if(g[2]=="auto"){d=cbox.maximizeCBoxVideoAndIFrameObject(d)}else{if(g[2]=="tall_max"){d.width=480;d.height=640;d=cbox.maximizeCBoxVideoAndIFrameObject(d)}else{if(g[2]){d.width*=g[2];d.height*=g[2]}}}if(r.hasClass("iframeembed")){cbox.renderCbox(t,null,null,null,d)}else{cbox.renderCbox(t,null,d)}}else{if(r.hasClass("plink")){if(t.linkUrl){if(t.linkUrl.indexOf("moyi.io/")==-1){var m=t.linkUrl.match(/\/p\/([a-z0-9]+)/);if(m){t.pid=parseInt(m[1],36);t.plurkUrl=m[1];cbox.renderCbox(t,null,null,t.pid)}}else{cbox.renderCbox(t,null,null,t.pid);return true}}else{t.linkUrl="/p/"+t.plurkUrl;cbox.renderCbox(t,null,null,t.pid)}}}}ClickEvent.clickWindow(q);return false},videoUrlFix:function(f,l){var l=l||null;f=f.replace("&amp;","&");var b=cbox.ogmap;for(var d in b){var c=(l&&(l==b[d].site))||(b[d].regex&&f.match(b[d].regex)||null);if(!c){continue}var g=(b[d].urlfix)?b[d].urlfix(f):f;var j=(b[d].loopfix)?b[d].loopfix(g):f;var h=b[d].sizeRatio||null;return[g,j,h]}return[f,null,null]},ogmap:{youtube:{regex:/(youtube\.com\/embed\/)|(youtube\.com\/v\/)/,urlfix:function(b){b=b.replace("/v/videoseries?","/embed/videoseries?");b=b.replace("http://","https://");return cbox.urlAddAutoplay(b)},loopfix:function(c){if(c.match(/^.*\/videoseries\?.*$/)){return}var c=cbox.urlAddLoop(c);var b=c.match(/^.*(playlist=).*$/i);if(!b){var d=c.match(/^.*\/(v|embed)\/(.*)\?.*$/);if(d){return c+"&playlist="+d[2]}}return c},sizeRatio:"auto"},vimeo:{regex:/vimeo\.com\/.*/,urlfix:function(b){return cbox.urlAddAutoplay(b)},loopfix:function(b){return cbox.urlAddLoop(b)},sizeRatio:"auto"},cloudy:{regex:/cloudy\.ec\/.*/,urlfix:function(b){return cbox.urlAddAutoplay(b)},loopfix:function(b){return cbox.urlAddLoop(b)},sizeRatio:"auto"},scribd:{regex:/scribd.com\/doc\//,urlfix:function(c){var b=c.match(/scribd.com\/doc\/(\d+)/);if(b){return"//www.scribd.com/embeds/"+b[1]+"/content?start_page=1"}},sizeRatio:"tall_max"},mlb:{regex:/mlb\.com\//,urlfix:function(b){return b.replace("_600K","_1200K")},sizeRatio:2},gmap:{regex:/maps\.google\.|google\.[^\/]+\/maps/,urlfix:function(g){var b="en";var f=g.match(/hl=([-_\w]+)/);if(f){b=f[1]}var h;var j=15;var f=g.match(/ll=([-\d.]+,[-\d_]+)/);var c="roadmap";if(f){h=f[1]}else{f=g.match(/@([-\d.]+,[-\d.]+)(,(\d+)([amz]))/);if(f){h=f[1];j=(f[4]=="z")?f[3]:"16";if(f[4]=="a"||f[4]=="m"){c="satellite"}}}if(h){var d="https://www.google.com/maps/embed/v1/view?key=AIzaSyD5WxpgsmFXVC600sFWJnVMYpJBB4Qaa50";d+="&center="+h+"&zoom="+j+"&maptype="+c+"&language="+b;return(d)}return(null)},sizeRatio:"auto"},slideshare:{site:"@slideshare",sizeRatio:"auto"},speakerdeck:{regex:/speakerdeck\.com\//,sizeRatio:"auto"},issuu:{regex:/issuu\.com\//,sizeRatio:"auto"}},urlAddAutoplay:function(c){var c=c.replace("autoplay=0","autoplay=1");var b=c.match(/^.*(autoplay=1).*$/i);if(b){return c}b=c.match(/^.*(\?).*(=).*$/);if(b){return c+"&autoplay=1"}return c+"?autoplay=1"},urlAddLoop:function(c){var c=c.replace("loop=0","loop=1");var b=c.match(/^.*(loop=1).*$/i);if(b){return c}b=c.match(/^.*(\?).*(=).*$/);if(b){return c+"&loop=1"}return c+"?loop=1"},renderCbox:function(m,y,u,g,s){var q=this.$body;var w=(u!=null);var l=(g!=null);var v=(s!=null);var x=q.hasClass("cboxOpen");var f=q.hasClass("cboxVideo");var t=q.hasClass("cboxPlink");if(!cbox.mobile_mode){cbox.txtw=cbox.cbox_txtw}if(f){cbox.closeVideo()}if(w){var y={};y.scaleh=u.height;y.scalew=u.width;m.iframeUrl=u.iframeUrl;m.loopUrl=u.loopUrl;m.videoTitle=u.title;y=cbox.scaleCBoxImgForVideoAndIFrame(y);if(q.hasClass("cboxHide")){cbox.hideVideoClose()}}else{if(v){var y={};if(x){y.scalew=Math.max(s.width,parseInt(a("#cboxLoadedContent:visible").find(".cbox_left").css("width")));y.scaleh=y.scalew*s.height/s.width}else{y.scaleh=s.height;y.scalew=s.width}m.iframeUrl=s.iframeUrl;y=cbox.scaleCBoxImgForVideoAndIFrame(y)}else{if(l){var y={};y.scaleh=0;y.scalew=0;cbox.txtw=cbox.plink_txtw}}}m.imgBoxH=y.scaleh>cbox.maxh?cbox.maxh:y.scaleh;m.imgBoxH=m.imgBoxH<cbox.minh?cbox.minh:m.imgBoxH;m.imgBoxW=y.scalew<cbox.maxw?y.scalew:cbox.maxw;m.imgBoxW=m.imgBoxW>cbox.minw?m.imgBoxW:cbox.minw;if(y.scaleh>m.imgBoxH){m.imgBoxW+=cbox.scrollbarWidth;m.scrollbar="scroll"}else{m.scrollbar="hidden";m.cls_scrollbar="noScroll"}var d,o;cbox.txtw=cbox.txtw||0;d=m.imgBoxW+cbox.txtw;o=m.imgBoxH;if(w||v){m.videoBoxH=m.imgBoxH+25;o=m.videoBoxH}else{if(l){d=cbox.txtw}}var c=a("#cboxLoadedContent:visible");if((c.length>0)&&x&&(!w)&&(!l)&&(!t)){var h={w:c.width(),h:c.height()};d=d>h.w?d:h.w;o=o>h.h?o:h.h;if((d>h.w)||(o>h.h)){a.colorbox.resize({width:d+"px",height:o+"px"});cbox.adjustResponseHeight()}m.imgBoxW=d-cbox.txtw;m.imgBoxH=m.videoBoxH=o}m.txtw=cbox.txtw;m.imgWidth=y.scalew;m.imgHeight=y.scaleh;if(w||v){m.imgTop=(o-y.scaleh-25)/2}else{m.imgTop=(o-y.scaleh)/2}m.imgTop=m.imgTop>0?m.imgTop:0;m.urlMaxWidth=m.imgBoxW*0.66>300?m.imgBoxW*0.66:300;m.urlMaxWidth=(m.urlMaxWidth+12>m.imgBoxW)?m.imgBoxW*0.9:m.urlMaxWidth;m.mobileUrl=(cbox.mobile_mode)?"display: inline;":"";if((c.length>0)&&(x&&(!w)&&(!l)&&(!t))){var b=c.find(".cbox_response");b.find("div.current").removeClass("current");b.find("div.plurk[data-rid="+m.rid+"]").addClass("current");if(!w&&!v){c.find(".cbox_left").replaceWith(cbox.cboxLeftTmpl(m))}else{c.find(".cbox_left").replaceWith(cbox.cboxLeftVideoTmpl(m))}q.removeClass("cboxLoading");return false}if(!m.pid){d-=m.txtw;var j=cbox.cboxLeftTmpl(m);if(w||v){var j=cbox.cboxLeftVideoTmpl(m)}}else{var j=cbox.cboxTmpl(m);if(w||v){var j=cbox.cboxVideoTmpl(m)}if(l){var j=cbox.cboxPlinkTmpl(m)}}cbox.boxh=o||0;var r={html:j,width:d+"px",height:o+"px",initialWidth:0,initialHeight:0,scrolling:false,transition:"none",fixed:true,overlayClose:false,escKey:false};if(cbox.cancelLoading){return}else{a(document).one("cbox_complete",function(){var C;var B=m.linkUrl.replace(/^https?:\/\//i,"").replace(/\/.*$/,"");if(w){a("#colorbox").clone().attr("id","colorboxVideo").appendTo(q);jQuery.colorbox.close();q.addClass("cboxVideo").removeClass("cboxOpen").removeClass("cboxPlink").removeClass("cboxLoading");C=a("#colorboxVideo");_gaq_push(["_trackEvent","showEmbed","video",B]);if((m.linkUrl.toLowerCase().indexOf("://www.youtube.com")!==-1||m.linkUrl.toLowerCase().indexOf("://youtube.com")!==-1)&&(navigator.userAgent.toLowerCase().indexOf("safari/")!==-1&&navigator.userAgent.toLowerCase().indexOf("chrome/")===-1&&navigator.userAgent.toLowerCase().indexOf("chromium/")===-1)){var z=C.find("#cboxContent iframe")[0];z.src=z.src}}else{if(f){cbox.closeVideo()}if(t){q.removeClass("cboxPlink")}if(l){q.addClass("cboxPlink").removeClass("cboxLoading");C=a("#colorbox");_gaq_push(["_trackEvent","showEmbed","plink",B])}else{q.addClass("cboxOpen").removeClass("cboxLoading");C=a("#colorbox");if(v){_gaq_push(["_trackEvent","showEmbed","iframe_"+function(){return s.site||"generic"}(),B])}else{_gaq_push(["_trackEvent","showEmbed","image",B])}}}C=C.find(".cbox_right:visible");if(!C.length){return}C.find(".cbox_report_abuse").click(function(){cbox.close();(new PopWindow({url:this.href+"?overlay=1",width:650})).show();return false});var A=m.pid;if(A&&m.isAds&&!l){A=Math.floor(A/1000)}cbox.getContent(C,A,m.rid,l);if(!m.isAds||m.uid==807){if(l){if(OpenX.country_code=="TW"){cbox.insertClickforce(C,A)}else{cbox.insertSkimlinks(C,A)}}else{cbox.getAds(C,A,m.respcount)}}});jQuery.colorbox(r)}},scaleImage:function(b){var d,g,c,f;d=c=b.width;g=f=b.height;if(g>cbox.maxh){f=boxh=cbox.maxh;c=Math.floor(d*f/g)}if(c>cbox.maxw){f=boxh=Math.floor(f*cbox.maxw/c);c=cbox.maxw}if((c<cbox.minw)&&(g>cbox.maxh)){c=(d>cbox.maxw)?cbox.maxw:d;f=boxh=Math.floor(g*c/d)}b.scalew=c;b.scaleh=f;return b},getContent:function(d,b,c,f){var f=f||false;a.post(UrlPre+"/Responses/get2",{plurk_id:b,include_plurk:1,js_date:0}).success(function(m){m=a.parseJSON(m);if(!m){return}var l=Utils.protocolRelative(m.plurk.content);var h={pid:b,uid:m.owner.id,user_nick:m.owner.nick_name,avatar:avatar_path(m.owner,"medium"),display_name:m.owner.display_name||m.owner.nick_name,name_color:function(){return(!m.owner.name_color)?"111111":m.owner.name_color},plurk_Ctnt:l,qualifier:m.plurk.qualifier,qualifier_translated:function(){if(!window.Qualifiers){return m.plurk.qualifier}else{var q=Qualifiers._(m.owner.gender,m.plurk.lang,m.plurk.qualifier);return(q)?q:m.plurk.qualifier}}};if(m.plurk){cbox.curPlurkObj=m.plurk}var g=a(cbox.cboxHeaderTmpl(h));if(window.Media){Media.attach(g.find(".content").get(0))}d.find(".cbox_plurk_main").replaceWith(g);d.css("background-image","none");var j=d.find(".quick_reply");if(j&&cbox.showQuickReply(m.plurk,m.friends)){j.removeClass("hide");var o=j.find("textarea");setTimeout(function(){o.focus()},1000);o.keyup(function(q){if(this.scrollHeight>Math.ceil(o.innerHeight())){o.height(this.scrollHeight+10)}})}cbox.adjustResponseHeight();cbox.showResponse(c,m.plurk,m.responses,m.friends,0,true);if(cbox.session_uid){cbox.markPlurkAsRead(b)}}).fail(function(m){if(m.status==403){var j={avatar:avatar_path(null,"medium"),plurk_Ctnt:_("This timeline is set to private.")};var h=a(cbox.cboxHeaderTmpl(j));d.find(".cbox_plurk_main").replaceWith(h);d.css("background-image","none")}else{var l=_("This plurk seems to be deleted.");var g=jQuery('<div class="error"></div').text(l);d.find(".cbox_response").html(g)}return})},showQuickReply:function(b,c){if(cbox.session_uid){if(cbox.session_uid==b.owner_id){return true}if(b.no_comments==0||b.no_comments==2){return true}}return false},showResponse:function(f,b,o,u,j,s){s=s||false;j=j||0;var t=((j+cbox.respLoadNum)>o.length)?o.length:(j+cbox.respLoadNum);var r=(t<o.length)?true:false;var l=cbox.getCbox();if(!l){return}var m=l.find(".cbox_response");var q=m.find(".response_inbox");var c=q.find(".loadmore");for(var h=j;h<t;h++){var d=o[h];var g=u[d.user_id];cbox.appendSingleResp(b,d,g,f,false)}if(r&&(m.innerHeight()>q.outerHeight())){cbox.showResponse(f,b,o,u,t,true);return}if(s){cbox.scrollToCurrent()}if(!r){c.remove()}else{if(c.length==0){c=a("<div class='loadmore'>...</div>").data("infinitely",true).appendTo(q)}c.one("click",function(){m.unbind("scroll");c.data("infinitely",true);cbox.showResponse(f,b,o,u,t,false);return false});m.scroll(function(){if(c.data("infinitely")&&this.scrollTop+m.innerHeight()>=this.scrollHeight-10){c.click()}})}},appendSingleResp:function(c,f,j,h,s){if(!j||!c||!f){return}h=h||null;var l=cbox.getCbox();if(!l){return}var o=l.find(".response_inbox");var d=o.find(".loadmore");var g=(f.user_id==99999);var m=Utils.protocolRelative(f.content);var b={pid:f.plurk_id,uid:f.user_id,rid:f.id,qualifier:f.qualifier,qualifier_translated:function(){if(!window.Qualifiers){return f.qualifier}else{var t=Qualifiers._(g?2:j.gender,c.lang,f.qualifier);return(t)?t:f.qualifier}}(),user_nick:g?"anonymous":j.nick_name,name_color:function(){if(f.handle!="ಠ_ಠ"&&f.my_anonymous){return"0a9c17"}else{if(g){return"ae00b0"}else{return(!j.name_color)?"111111":j.name_color}}}(),avatar:g?"//avatars.plurk.com/99999-small8.gif":avatar_path(j,"small"),display_name:f.handle||j.display_name||j.nick_name,plurk_Ctnt:m,classStr:function(){return(f.id==h)?"current":""}()};var q=a(cbox.cboxRespTmpl(b));if(q.find("a.pictureservices").length){q.addClass("withimage")}if(window.Media){Media.attach(q.find(".content").get(0))}var r=a(".cbox_plurk.current");if(r.length>0&&b.classStr=="current"){r.removeClass("current")}if(!s&&d.length){q.insertBefore(d)}else{q.appendTo(o)}if(s&&d){d.data("infinitely",false)}},scrollToCurrent:function(){var b=cbox.getCbox();if(!b){return}var d=b.find(".cbox_response");var c=d.find(".cbox_plurk.current:last");if(c.length){var f=d.scrollTop()+c.last().position().top-50;d.animate({scrollTop:f},500,"swing")}},insertAFC:function(h,c,m,b,o){if(!c){return}google_ad_client="ca-pub-2279165183083294";google_ad_slot=m;google_ad_width=b;google_ad_height=o;google_page_url="https://www.plurk.com/m/p/"+c.toString(36);var d="google_";var l=window[d+"persistent_state_async"];if(l&&l.S){l.S[d+"num_ad_slots"]=0;l.S[d+"prev_ad_slotnames_by_region"]=""}var j="";document.write=function(g){j+=g};try{a.getScript("https://pagead2.googlesyndication.com/pagead/show_ads.js",function(){h.find(".cbox_ads").append(j);cbox.adjustResponseHeight()})}catch(f){}},insertSitetag:function(d,b){a.ajaxSetup({cache:true});var c='<iframe src="//banana.plurk.com/sitetag_cbox_300x100.html" style="width: 300px; height: 100px; overflow: hidden" frameBorder="0" scrolling="no"></iframe>';d.find(".cbox_ads").css("height","100px").html(c);cbox.adjustResponseHeight()},insertScupio:function(d,b){a.ajaxSetup({cache:true});window.scupio_target_id="scupio_pandora";var c='<ins class="scupioadslot" style="display:inline-block;width:300px;height:100px;" data-sca-pub="lRsAAxE1" data-sca-web="2581" data-sca-category="25" data-sca-cid="10740" data-sca-background-color="#ffffff" data-sca-title-color="#974806" data-sca-title-font-family="Microsoft JhengHei" data-sca-description-color="#333333" data-sca-description-font-family="Microsoft JhengHei" data-sca-border-color="#cccccc"></ins><script async src="//img.scupio.com/js/ad.js"><\/script>';d.find(".cbox_ads").css("height","100px").html(c);cbox.adjustResponseHeight()},insertClickforce:function(d,b){a.ajaxSetup({cache:true});var c='<iframe src="//banana.plurk.com/respondo_clickforce_468x60.html" style="width: 468px; height: 60px; overflow: hidden" frameBorder="0" scrolling="no"></iframe>';d.find(".cbox_ads").css("height","60px").html(c);cbox.adjustResponseHeight()},insertSkimlinks:function(d,b){a.ajaxSetup({cache:true});var c='<iframe src="//banana.plurk.com/skimlinks_respondo_468x60.html" style="width: 468px; height: 60px; overflow: hidden" frameBorder="0" scrolling="no"></iframe>';d.find(".cbox_ads").css("height","60px").html(c);cbox.adjustResponseHeight()},insertDFP:function(d,b){a.ajaxSetup({cache:true});var c="<div id='div-gpt-ad-1415868128291-0' style='width:300px; height:100px;'></div>";googletag.cmd.push(function(){googletag.display("div-gpt-ad-1415868128291-0")});d.find(".cbox_ads").css("height","100px").html(c);cbox.adjustResponseHeight()},getAds:function(d,b,c){if(SiteState.getSessionUser()&&!SiteState.getSessionUser().show_ads){return}if(!window.OpenX){return}OpenX.getAds(28,function(g){if(!g||!g.imgUrl){if(OpenX.country_code=="TW"){if(cbox.boxh>=800){cbox.insertAFC(d,b,"5699278700",300,250)}else{if(Math.random()<0.5){cbox.insertScupio(d,b)}else{cbox.insertSitetag(d,b)}}}else{if(cbox.boxh>=800){cbox.insertAFC(d,b,"5699278700",300,250)}else{cbox.insertAFC(d,b,"3893510082",234,60)}}return}var f=jQuery("<img>").each(function(){if(this.complete){jQuery(this).trigger("load")}}).one("load",function(){if(this.height==1){return}OpenX.logImpr(g.logUrl);if(d.length==1){d.find(".cbox_ads").html(f);cbox.adjustResponseHeight()}}).click(function(){window.open(g.clickUrl);return false}).attr("src",g.imgUrl)},false)},initVariable:function(){var c=jQuery(window).innerWidth();var b=jQuery(window).innerHeight();if(cbox.mobile_mode){cbox.cbox_txtw=0}cbox.maxw=c-cbox.maxw_padding-cbox.cbox_txtw;cbox.maxh=b;cbox.minw=Math.round(c*cbox.minw_scale);cbox.minw=cbox.minw>cbox.minw_thresh?cbox.minw_thresh:cbox.minw;cbox.minh=Math.round(b*cbox.minh_scale)},calcScrollbarWidth:function(){var h=a('<div style="width: 100%; height:200px;">test</div>'),d=a('<div style="width:200px;height:150px; position: absolute; top: 0; left: 0; visibility: hidden; overflow:hidden;"></div>').append(h),f=h[0],g=d[0];cbox.$body.append(g);var c=f.offsetWidth;d.css("overflow","scroll");var b=g.clientWidth;d.remove();return(c-b)},adjustResponseHeight:function(){var b=cbox.getCbox();if(!b){return}var d=100;var c=b.find(".cbox_right").innerHeight()-b.find(".quick_reply").outerHeight()-b.find(".cbox_ads").outerHeight();var f=c-b.find(".cbox_plurk_main").outerHeight();if(f<=d){b.find(".cbox_response").css("height",d);b.find(".cbox_plurk_main").css({height:c-d,overflow:"auto"})}else{b.find(".cbox_response").css("height",f);b.find(".cbox_plurk_main").css({height:"auto",overflow:"visible"})}},getCbox:function(){if(cbox.$body.hasClass("cboxOpen")||cbox.$body.hasClass("cboxPlink")){return a("#colorbox")}else{if(cbox.$body.hasClass("cboxVideo")){return a("#colorboxVideo")}}return null},markPlurkAsRead:function(b){if(!b){return}a.post(UrlPre+"/Responses/markAsRead",{plurk_id:b}).success(function(c){if((c=="ok")&&window.Poll){Poll.setPlurkRead(b);a("div.plurk[data-pid="+b+"]").removeClass("new")}})},plurkRespAdd:function(b,h,j){var m=new jQuery.Deferred();var j=j||":";if(!b||!b.owner_id||!b.plurk_id){m.rejectWith(_("Unknown error happened"))}if(!h||h.length==0){m.reject()}var c=GLOBAL.session_user.default_lang||"en";var l=h.length;if(l>210){var d=_("Content is too long. Remove %s characters.").replace("%s",l-210);m.rejectWith(d)}var f=Qualifiers.transformContentQualifer(j,h,c);j=f[0];h=f[1];if(j=="freestyle"){j=":"}var g={posted:(new Date()).toISOString(),qualifier:j,content:h,p_uid:b.owner_id,plurk_id:b.plurk_id,replurker_id:b.replurker_id,lang:c,uid:cbox.session_uid,js_date:false};m.notifyWith(_("Plurking response..."),["ajaxing"]);a.post(UrlPre+"/Responses/add",g).done(function(o){m.resolve(JSON.parse(o))}).fail(function(q,r){if(q.status==400){var o=function(){if(q.responseText=="anti-flood-same-content"){return(_("Woaaa, could not plurk due to anti flood rules.\nIt seems you have plurked this a few minutes ago."))}if(q.responseText=="anti-flood-too-many-new"){return(_("Woaaa, could not plurk due to anti flood rules.\nYou have plurked too many plurks the past few minutes.\nChill down and come back in 10 minutes time."))}if(q.responseText=="anti-flood-too-many-still"){return(_("Your plurking is disabled.\nYou have plurked too much, chill down and come back in 10 minutes time."))}if(q.responseText=="blocked-ip"){return([_("Your IP is blocked due to security concerns. You must unblock it using our website."),["redirect","/AntiSpam/showIPBlocked"]])}else{return(_("Your Plurk seems to contain spam. If this is not the case, please contact us on support@plurk.com"))}}();m.rejectWith(o)}else{if(q.status==404){m.rejectWith(_("This plurk seems to be deleted."))}else{if(q.status==403){m.rejectWith(_("You don't have permission for this."))}else{m.rejectWith(_("An unknown error happened."))}}}});return m.promise()},scaleCBoxImgForVideoAndIFrame:function(b){if(b.scalew>cbox.maxw){b.scaleh*=cbox.maxw/b.scalew;b.scaleh=Math.floor(b.scaleh);b.scalew=cbox.maxw}if(b.scaleh>cbox.maxh-25){b.scalew*=(cbox.maxh-25)/b.scaleh;b.scalew=Math.floor(b.scalew);b.scaleh=(cbox.maxh-25)}return b},maximizeCBoxVideoAndIFrameObject:function(b){if((cbox.maxw/b.width)<(cbox.maxh/b.height)){b.height*=cbox.maxw/b.width;b.width=cbox.maxw}else{b.width*=cbox.maxh/b.height;b.height=cbox.maxh}return b}};cbox.init()});function attachKeyDown(a,b){if(AJS.isSafari(true)){AJS.AEV(a,"keydown",b)}else{if(AJS.isCamino()){AJS.AEV(a,"keyup",b)}else{AJS.AEV(a,"keypress",b)}}}function escapeRegExp(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function forceHalfWidth(c){var b="";if(!c){return""}for(var a=0;a<c.length;a++){if(c.charCodeAt(a)>65280){b+=String.fromCharCode(c.charCodeAt(a)-65248)}else{b+=c[a]}}return b}function discardElement(){if(AJS.isIe()){var c=document.getElementById("IELeakGarbageBin");if(!c){c=document.createElement("DIV");c.id="IELeakGarbageBin";c.style.display="none";document.body.appendChild(c)}var a=AJS.forceArray(arguments);try{AJS.map(a,function(d){if(d){AJS.ACN(c,d)}})}catch(b){}c.innerHTML=""}else{var a=AJS.forceArray(arguments);AJS.map(a,function(d){AJS.removeElement(d)})}}function unescapeHTML(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function strip(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")}function PNGIMG(){var b=AJS.IMG.apply(window,arguments);if(/msie ((5\.5)|6)/.test(navigator.userAgent.toLowerCase())&&/\.png/.test(b.src)){var a=b.width;var c=b.height;b.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b.src+"', sizingMethod='scale');";b.src="//s.plurk.com/22edb6617e829a61262a0835d85572f7.gif";if(a){b.width=a}if(c){b.height=c}}return b}Utils={arrayUpdate:function(b,a){for(var c in a){b[c]=a[c]}return b},getYears:function(d){if(!d){return null}var c=new Date();var b=new Date(d);if(b.getUTCFullYear()==1970&&b.getUTCMinutes()==0){return""}if(b.getUTCFullYear()<=1904&&b.getUTCSeconds()==1){return""}var a=c.getFullYear()-b.getUTCFullYear();if(b.getUTCMonth()>c.getMonth()||(b.getUTCMonth()==c.getMonth()&&b.getUTCDate()>c.getDate())){a=a-1}return format(_("%s years old"),a.toString())+", "},copyToClipboard:function(a){a.focus();a.select();if(AJS.isIe()){window.clipboardData.setData("text",a.value)}else{}return false},isLoggedIn:function(){try{var a=window.GLOBAL||null;if(a&&a.session_user){return true}return false}catch(b){return false}}(),isBetaUser:function(){try{var a=window.GLOBAL||null;if(a&&a.session_user){return a.session_user.beta}return false}catch(b){return false}}(),isIE:function(){var c,a=3,d=document.createElement("div"),b=d.getElementsByTagName("i");while(d.innerHTML="<!--[if gt IE "+(++a)+"]><i></i><![endif]-->",b[0]){}return a>4?a:c},qualifierTranslate:function(c,d,b){d=d||"en";b=b||"";var a=b;if(window.LANG_QUAL&&LANG_QUAL[d]){a=LANG_QUAL[d][b];if(Array.isArray(a)){if(c==1){a=a[0]}else{a=a[1]}}}return a},protocolRelative:function(a){return a.replace(/http:\/\/((paste|images|emos|assets|s|statics|img)\.plurk\.com|([^\/]+\.){0,3}(ytimg|staticflickr|imgur|fbcdn|amazonaws|blogspot|cloudfront)\.(com|net))\//g,"https://$1/")}};function barePlurkRender(c,a){var b=Qualifiers.format(c,a.qualifier,a.content,false,a.lang,a.id);return AJS.DIV({c:"plurk"},AJS.TABLE(AJS.TBODY(AJS.TR(AJS.TD({c:"td_qual"},b[0]),AJS.TD({c:"td_cnt"},b[1])))))}function _avatar_path(c,f,a){var b="https://www.plurk.com/static/default_"+f+".gif";if(c>0&&a>=0){var d=f=="big"?"jpg":"gif";var a=a||"";var g=c+"-"+f+a+"."+d;b="//avatars.plurk.com/"+g}return b}function avatar_path(b,d){if(!d){d="medium"}var c=0;var a="";if(b&&b.avatar!==null&&b.id!=null){a=b.avatar;c=b.id}return _avatar_path(c,d,a)}function scrollToTop(){window.scrollTo(0,0)}function AjaxCall(a){return function(d,f,b){var c=AJS.loadJSON(a);c.addCallbacks(f,b);c.sendReq(d);return c}}function imageSprite(a,b){return AJS.DIV({s:b,c:a})}strMonth=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function formatDate(b,f){var c=b.getFullYear();var d=b.getMonth()+1;var a=b.getDate();if(f==0){return c+"-"+d+"-"+a}else{if(f==1){return d+"/"+a+"/"+c}else{if(f==2){return a+"/"+d+"/"+c}else{return strMonth[d-1]+" "+a+", "+c}}}}function shuffle(d){var b;var c;var a=d.length;while(a>0){b=Math.floor(Math.random()*a);a--;c=d[a];d[a]=d[b];d[b]=c}return d}DummyBabel={gettext:function(a){return a},ngettext:function(a,b,c){return c==1?a:b},format:function(){var b,c=arguments[0],a=0;if(arguments.length==1){return c}else{if(arguments.length==2&&typeof arguments[1]=="object"){b=arguments[1]}else{b=[];for(var d=1,f=arguments.length;d!=f;++d){b[d-1]=arguments[d]}}}return c.replace(/\%(?:\(([^\)]+)\))?([disr])/g,function(j,g,h){var l=b[g||a++];if(h=="i"||h=="d"){return +l}if(h=="r"){return"'"+l.replace(/[\\']/,"\\$1")+'"'}return l})}};if(!window.babel){gettext=DummyBabel.gettext;_=gettext;ngettext=DummyBabel.ngettext;format=DummyBabel.format}CLIQUES_DEFAULT=["Colleagues","Classmates","Close Friends"];CLIQUES_DEFAULT_TRANS=[_("Colleagues"),_("Classmates"),_("Close Friends")];jQuery(document).ready(function(a){Media.at_timeline=jQuery("body").hasClass("timeline");Media.host=window.location.host.replace(/www\./,"");Media.re_host=new RegExp("https?://?"+Media.host,"gi");if(Media.at_timeline){Media._attachTimelineLinkEvent()}});Media={big_size:false,max_width:72,max_height:48,at_timeline:false,classExcludeList:"",host:"",re_host:null,attach:function(b,a){setTimeout(function(){jQuery(b).find("a").each(function(d,f){var c=jQuery(f);if(c.hasClass("iframeembed")){return}if(c.hasClass("facebook")){Media._attachVideo(f)}else{if(c.hasClass("oembed")){c.addClass("iframeembed")}else{if(c.hasClass("gmap")){c.addClass("iframeembed")}else{if(c.hasClass("pictureservices")){return}else{if(c.hasClass("ex_link")){Media._attachExternal(c)}}}}}})},1);if(!Media.at_timeline){return}setTimeout(function(){var c=jQuery(b);var d=c.parents(".plurk");if(d.data("type")!="plurk"){return}d.data("truncated",true);if(c.find(".videoservices, .ogvideo, .pictureservices, .plink").length>0){c.addClass("truncated_media_height")}else{if(c.find(".meta").length>0){c.addClass("truncated_media_height")}else{d.data("truncated",false)}}},5)},_attachExternal:function(b){var d=b.get(0);var c=d.href.replace(/www\./,"");if(c.search(Media.re_host)==-1){d.target="_blank"}if(window.SiteState){if(c.indexOf(Media.host+"/")!=-1){var f=c.match(/[^\/p]\/([A-Za-z0-9_]{3,})/i);if(f&&f[1]&&(f[1]!="mall")){var a=SiteState.getUserByNick(f[1]);if(a&&a.display_name){b.text(a.display_name)}}}}if(d.innerHTML.indexOf("::Plurk Frontpage Promotion::")!=-1){b.addClass("plurk_top_link").attr("target","_blank").text(_("Promoted this plurk to Plurk Frontpage"))}},_openMallItem:function(b){var c=b.get(0);var d=c.href.match(/\/(\d+)$/);if(d){d=d[1]}var a=(b.find("img").attr("src").indexOf("crazymike")!=-1)?"craz":"N/A";a=a+"_"+d+"_"+b.text();window.open(c);_gaq_push(["_trackEvent","mall","open_item_by","timeline"],["_trackEvent","mall","open_item_window",a])},_attachTimelineLinkEvent:function(){if(!Media.classExcludeList.length){var a=["facebook","oembed"];if(window.cbox){a=a.concat(cbox.classList)}Media.classExcludeList="."+a.join(", .")}jQuery("#timeline_holder, #form_holder").on("click",".ex_link",function(d){var c=this;var b=jQuery(this);if(b.hasClass("plurkpaste")||(c.href.indexOf("paste.plurk.com/show")>-1)){_gaq_push(["_trackEvent","showEmbed","paste",c.href]);(new PopWindow({url:c.href,width:800})).show()}else{if(b.hasClass("plurkmall")){Media._openMallItem(b)}else{if(b.hasClass("solda")){console.log("QQ");StoreWindow.openLink(c)}else{if(!b.is(Media.classExcludeList)){Media._hideLink(c)}else{return true}}}}ClickEvent.clickWindow(d);return false})},_hideLink:function(d){var c,a;if(jQuery(d).hasClass("rd")){c="/go?u="+encodeURIComponent(d.href);a="afl"}else{if(d.href.match(/^https?:\/\/(\w+\.)?plurk\.com\/.+/)){c=d.href;a="plurk"}else{c="http://go.plurk.com/?";var b=d.getAttribute("href");if(b.indexOf("//")==0){b="http:"+b}c+="url="+encodeURIComponent(b);c+="&id=33357X911862&xs=1";a="skl"}}if(SiteState.getSessionUser().beta&&console){if(a=="skl"){console.log("[skimlinks] "+c)}else{if(a=="afl"){console.log("[affiliate] http://www.plurk.com"+c)}}}window.open(c,"_blank");var f=d.href.replace(/^https?:\/\//i,"").replace(/\/.*$/,"");_gaq_push(["_trackEvent","outbound",a,f]);return false},_attachVideo:function(g){var a={facebook:{regex:/facebook.com\/(video\/video.php\?v=|v\/)([^&]+)/,url:"http://www.facebook.com/v/%s",pattern:[2]}};var j=jQuery(g);var b=j.find("img")[0];if(!b){return false}var h=b.alt;if(h.length>45){h=h.substr(0,45)+"..."}Media._attachBigSize(b);var d={};for(var c in a){var f=g.href.match(a[c].regex);if(!f){continue}var l=a[c].url;a[c].pattern.map(function(m){if(f[m]!=null){l=l.replace(/%s/,f[m])}else{l=l.replace(/%s/,"")}});d.iframeUrl=l;d.width=640;d.height=360;d.title=h}if(d){j.data("videoObj",d).addClass("videoservices")}},_attachBigSize:function(a){if(a.width&&a.height){if(window.SiteState&&!SiteState.canEdit()||Media.big_size&&!a.big_size){a.width+=a.width*0.35;a.height+=a.height*0.35;a.big_size=true}}}};ClickEvent={clickHandler:function(b){var a=jQuery(b.target);ClickEvent.ClickClose.run(a)},init:function(){jQuery("a[void]").attr("href","javascript:void(0)");jQuery(document).on("click",function(a){ClickEvent.clickHandler(a)})},clickWindow:function(a){ClickEvent.clickHandler(a)},ClickClose:{$poll:[],pollIndexOf:function(g,c){if(!(g instanceof jQuery)){g=jQuery(g)}var f=ClickEvent.ClickClose.$poll;var b=f.length;var a=-1;for(var d=0;d<b;d++){if(f[d].$obj[0]==g[0]&&f[d].sel==c){a=d;break}}return a},makePollObj:function(c,a,b){if(!(c instanceof jQuery)){c=jQuery(c)}if(!c[0]){return null}c[0].open_clicked=b;return{"$obj":c,sel:a}},push:function(f,a,b){if(f&&ClickEvent.ClickClose.pollIndexOf(f,a)<0){var c=ClickEvent.ClickClose.$poll;var d=ClickEvent.ClickClose.makePollObj(f,a,b);if(d){c.push(d)}}},remove:function(d,b){var c=ClickEvent.ClickClose.$poll;var a=ClickEvent.ClickClose.pollIndexOf(d,b);if(a>-1){c.splice(a,1)}},run:function(a){var g=ClickEvent.ClickClose.$poll;var b=g.length;var c=[];for(var f=0;f<b;f++){var d=g.pop();if(!d){continue}if(!a.andSelf().closest(d.sel).length||a.hasClass("onClose")){if(d.$obj[0].open_clicked===true){c.push(d.$obj);continue}}g.unshift(d)}ClickEvent.ClickClose.setOpenClick();var b=c.length;while(b-->0){var h=c.shift();if(h){h.trigger("clickClose")}}},setOpenClick:function(){var c=top.ClickEvent.ClickClose.$poll;var a=c.length;for(var b=0;b<a;b++){var d=c[b];if(!d||!d.$obj[0]){continue}d.$obj[0].open_clicked=true}}}};jQuery(document).ready(function(){ClickEvent.init()});MouseWheel={lockWheelInElement:function(a){jQuery(a).on("wheel",function(h){var d=jQuery(this);var j=h.wheelDelta||(h.originalEvent&&(h.originalEvent.wheelDelta||-h.originalEvent.deltaY))||-h.detail;var g=d.scrollTop();var c=g-j;var f=d[0].scrollHeight-d.outerHeight();var b=false;if(c>=f){b=true;if(g!=f){d.scrollTop(f)}}else{if(c<=0){b=true;if(g!=0){d.scrollTop(0)}}}if(b){if(h.preventDefault){h.preventDefault()}if(h.stopPropagation){h.stopPropagation()}return false}})},attachTLScroll:function(a){MouseWheel.hookEvent(a,"mousewheel",MouseWheel.scrollTimeLine)},hookEvent:function(b,a,c){b=AJS.$(b);if(b==null){return}if(b.addEventListener){if(a=="mousewheel"){b.addEventListener("DOMMouseScroll",c,false)}b.addEventListener(a,c,false)}else{if(b.attachEvent){b.attachEvent("on"+a,c)}}},scrollTimeLine:function(d){var b=(d.target)?d.target:d.srcElement;var a=AJS.isIn(AJS.getNodeName(b),["input","textarea"]);if(!a){TimeLine.santa_redlight();AJS.preventDefault(d);Plurks.removeCurrentOpen();if(InfoOverlay.info_view){InfoOverlay.hide()}d=d||window.event;var c=d.detail?d.detail*-1:d.wheelDelta/40;if(c>0){TimeLine.slideBack(10,40,"left")}else{if(c<0){TimeLine.slideBack(10,-40,"right")}}if(jQuery("body").hasClass("timeline")&&window.scrollTop!=0){window.scrollTo(0,0)}return false}}};USERS={};if(GLOBAL.session_user){USERS[GLOBAL.session_user.id]=GLOBAL.session_user}if(GLOBAL.page_user){USERS[GLOBAL.page_user.id]=GLOBAL.page_user}Users={update_title:true,init:function(){Users.updateTitle()},getUserImgSrc:function(a,c){c=c||"small";var b="/static/default_"+c+".gif";if(a.avatar!==null){b=avatar_path(a,c)}if(top.SETTINGS&&top.SETTINGS.seed&&SiteState.getPageUser().uid==a.uid){b+="?f="+top.SETTINGS.seed}return b},getLocation:function(a){var b="";if(a.location){b=" "+format(_("from %s"),a.location)+" "}if(b.length>30){b=b.substring(0,30)+"..."}return b},getGender:function(a){var b=a.gender;return b==0?_("female"):(b==1?_("male"):_("not stating / other"))},_getStandard:function(){var a=SiteState.getSessionUser().display_name;a=a&&a.length?a:SiteState.getSessionUser().nick_name;return"Plurk | "+a},updateTitle:function(){if(!Users.update_title){return}var g="";var c=window.Poll?AJS.keys(Poll.current_data.new_plurks).length:0;var h=window.Poll?AJS.keys(Poll.current_data.unread_plurks).length:0;var b=SiteState.getPageUser();var d=b.display_name&&b.display_name.length?b.display_name:b.nick_name;var a=b.page_title&&b.page_title.length?b.page_title:d;if(c||h){g=(c+h)+" "+_("unread")+" - "}var f=Users.base_title;if(!f){Users.base_title=f=document.title}document.title=g+f}};SiteState={init:function(){},getPageUser:function(){if(!window.GLOBAL){return{}}return GLOBAL.page_user},getSessionUser:function(){if(!window.GLOBAL||!GLOBAL.session_user){return null}return GLOBAL.session_user},getToken:function(){var a=SiteState.getSessionUser();if(a){return a.token}return""},goToHomePage:function(){var a=SiteState.getSessionUser();if(a==null){window.location.href="https://www.plurk.com"}else{window.location.href="/"+a.nick_name}},canEdit:function(){if(SiteState.getPageUser()&&SiteState.getPageUser().public_view){return false}var b=SiteState.getPageUser();var d=SiteState.getSessionUser();if(!d||!b){return false}if(b.uid==d.uid){var c=window.location.pathname.toLowerCase();var a=b.nick_name.toLowerCase();if(c.indexOf("/"+a)==0||c.indexOf("/user/"+a)==0){return true}}return false},isPermanentPage:function(){var a=""+window.location;return a.indexOf("/p/")!=-1},isIMActivated:function(){if(!window.FRIENDS){return null}return IM_ACTIVATE},getUserByNick:function(b){if(!b||!(typeof b==="string")){return null}if(b==GLOBAL.session_user.nick_name){return GLOBAL.session_user}var a=null;["USERS","FRIENDS","COMPLETION"].some(function(c){if(!window[c]){return}var f=window[c];for(var d in f){if(f[d].nick_name==b){if(!f[d].id||!f[d].uid){f[d].id=f[d].uid=d}a=f[d];return true}}});return a},getUserById:function(d){var b=SiteState.getPageUser();var c=SiteState.getSessionUser();if(b&&d==b.uid){return b}else{if(c&&c.id==d){return c}else{var a=FRIENDS[d];if(!a&&window.DisplayOptions&&DisplayOptions._backup_friends){return DisplayOptions._backup_friends[d]}if(!a){a=FANS[d]}if(!a){a=USERS[d]}return a}}},getPlurkUser:function(a){if(a.user){return a.user}return SiteState.getUserById(a.owner_id||a.user_id)},removeFriend:function(a){delete FRIENDS[a]},checkIfLoggedIn:function(){return true;var a=document.cookie;if(a&&a.indexOf("plurkcookie")!=-1&&a.indexOf("user_id=")!=-1){return true}else{return false}},dont_reload:false,_setPacksHash:function(a){if(!a){return}var c=SiteState;if(c.dont_reload||!c.canEdit()){return false}if(a!=c.getSessionUser().packs_hash){var b=confirm(_("A new version of Plurk is avaiable. This release could include important bug fixes or new features.\nPress OK to reload your browser OR cancel to continue using older version of Plurk."));if(b){window.location.reload()}else{c.dont_reload=true}return}c.getSessionUser()["packs_hash"]=a}};Misc={setTimezone:function(a,b){var d=window.GLOBAL.tz;if(!a.tz_set){var c=d.hh;if(d.dst&&b!=null){c--}if(b==1){c++}a.setHours(a.getHours()+c);a.setMinutes(a.getMinutes()+d.mm);a.tz_set=true}},showPaste:function(a){var b=document.getElementById("pane_plurk");var c="/Shares/showPaste";if(a=="input_small"){c+="?mini=1"}(new PopWindow({url:c,width:650,height:460})).show();return false}};function UserComplete(h,c,f,g,d,b,a){this.$dom=jQuery(h);this.key=c;this.matchStartPos=0;this.always_enable=a;this.match_no_select=g;this.select_fn=d;this.select_fn_only=b;this.init(f)}FRIEND_IDS=["friend_ids"];UserComplete.prototype={enable:false,key:null,str:"",matchStartPos:-1,onBackspaceDelete:false,source:{},$dom:null,nMap:{name:[],nickMap:{}},default_type:"simple",htmlTmplSrc:{simple:'<ul class="user_complete_list simple">{{#each user}}<li data-nick="{{this.nick}}" data-name="{{this.name}}" class="clearfix">{{this.name}}<span class="nick_name">@{{this.nick}}</span></li>{{/each}}</ul>',full:'<ul class="user_complete_list full">{{#each user}}<li data-nick="{{this.nick}}" data-name="{{this.name}}" class="clearfix"><img src="{{this.avatar}}"/><div><div class="display_name">{{this.name}}</div><div class="nick_name">@{{this.nick}}</div></div></li>{{/each}}</ul>'},$list:null,strMatch:"",htmlTmpl:null,init:function(a){var b=this;b.initMap();if(!a){a=this.default_type}if(!b.htmlTmpl){b.htmlTmpl=Handlebars.compile(this.htmlTmplSrc[a])}jQuery(document).on("click",function(){b.disableFunc()});b.bindKeyEvent()},addToMap:function(f){var d=this;for(var c in f){var a=f[c];var b=(a.display_name||a.full_name||a.nick_name);if(!d.nMap.nickMap[b]){d.nMap.nickMap["'"+b+"'"]={id:c,nick:a.nick_name,avatar:a.avatar||-1}}}d.nMap.name=Object.keys(d.nMap.nickMap).sort(function(h,g){return h.toLowerCase().localeCompare(g.toLowerCase())})},initMap:function(){var b=this;if(b.nMap.name.length){return}var a=function(d){window.FRIEND_COMPLETION=d;for(var c in d){FRIEND_IDS.push(c*1)}b.addToMap(d)};if(!window.FRIEND_COMPLETION){jQuery.post("/Friends/getMyFriendsCompletion").done(a)}else{a(window.FRIEND_COMPLETION)}},appendMap:function(){var a=this;if(window.USERS){a.addToMap(window.USERS)}if(window.FRIENDS){a.addToMap(window.FRIENDS)}if(window.COMPLETION){a.addToMap(window.COMPLETION)}},bindKeyEvent:function(){var a=this;a.$dom.keydown(function(f){var b=a.$list;if(a.always_enable){a.enable=true}if(!a.enable){return true}if(f.keyCode==27){a.disableFunc();return false}a.onBackspaceDelete=false;if(f.keyCode==8||f.keyCode==46){a.onBackspaceDelete=true}a.onTab=false;if((f.keyCode==13||f.keyCode==9)&&b){if(f.keyCode==9){a.onTab=true}var g=b.find(".sel");if(!g.length){a.disableFunc();return true}g.click();return false}if(f.keyCode==40||f.keyCode==38){if(!b){return true}var d=b.children("li").not(".no");if(d.length==0){return true}var c;for(c=0;c<d.length;c++){if(d[c].className.indexOf("sel")<0){continue}break}if(c==d.length){c=-1}else{jQuery(d[c]).removeClass("sel")}c=(f.keyCode==40)?c+1:c-1;if(c<0){c=d.length-1}if(c==d.length){c=0}var h=jQuery(d[c]);h.addClass("sel");if(h.position().top+h.outerHeight()>b.innerHeight()){b.scrollTop(b.scrollTop()+h.position().top+h.outerHeight()-b.innerHeight())}if(c==0){b.scrollTop(0)}if(h.position().top<0){b.scrollTop(b.scrollTop()+h.position().top)}return false}});a.$dom.keypress(function(c){var b=a.$list;if(c.which==a.key.charCodeAt(0)){a.appendMap();a.enable=true;a.matchStartPos=jQuery(this).get(0).selectionStart;return true}return true});a.$dom.on("input",function(g){if(!a.enable){return true}var f=jQuery(this);var b=f.val();var d=f.get(0).selectionStart;if(a.onBackspaceDelete){if(d==a.matchStartPos){return a.disableFunc()}else{if(!a.always_enable&&d<a.matchStartPos){a.matchStartPos-=1;return true}}}else{if(!a.always_enable&&a.key&&b[d-1]!=a.key&&d<=(a.matchStartPos+1)){a.matchStartPos+=1;return true}}if(!b||d<a.matchStartPos){return true}b=b.substr(a.matchStartPos+a.key.length);var c=escapeRegExp(b).trim().match(/([^\s]+)/);if(!c){a.strMatch="";if(a.$list){a.$list.remove();a.$list=null}return true}a.strMatch=c[0];a.matchUser(a.strMatch);return true})},selectListFirst:function(){var a=this;if(a.$list&&!a.$list.find("li:not(.no):first").is(".sel")){a.$list.find("li:not(.no):first").addClass("sel")}},removeList:function(){var a=this;if(a.$list){a.$list.remove();a.$list=null}},disableFunc:function(){var a=this;a.enable=false;a.removeList()},matchUser:function(a){var b=this;if(!a.length){return}a=a.toLowerCase();function d(f){return match=f.toLowerCase().indexOf(a)>=0}var c=b.nMap.name.filter(function(g){var f=new RegExp(a,"i");return d(g)||d(b.nMap.nickMap[g].nick)});if(!b.$list){b.renderList(c)}else{b.filterList(c)}if(!b.match_no_select){b.selectListFirst()}},renderList:function(c){var b=this;var a={};a.user=c.map(function(f){var d=b.nMap.nickMap[f];return{nick:d.nick,name:f.match(/'(.+)'/)[1],avatar:_avatar_path(d.id,"medium",d.avatar)}});b.$list=jQuery(b.htmlTmpl(a));b.$list.appendTo("body").offset({top:b.$dom.offset().top+b.$dom.outerHeight(),left:b.$dom.offset().left}).on("click","li",function(){var m=jQuery(this);var l=true;if(!b.onTab){if(b.select_fn){b.select_fn(m);if(b.select_fn_only){l=false}}}if(l){var h=b.key+b.strMatch;var f="@"+m.data("nick");var d=b.$dom.val();var j=b.matchStartPos;var g=j+h.length;if(j>0&&d[j-1]!=" "){f=" "+f}if(d[g]!=" "){f=f+" "}d=d.substr(0,j)+f+d.substr(g);j+=f.length;b.$dom.val(d).focus();b.$dom.caret(j)}b.disableFunc();return false}).on("hover","li",function(){b.$list.children("li").removeClass("sel");jQuery(this).addClass("sel")})},filterList:function(c){var b=this;var a=c.map(function(d){return d.match(/'(.+)'/)[1]});if(c&&!b.$list.children("li:not(.no):first").length){b.removeList();b.renderList(c)}b.$list.find("li").each(function(){var f=jQuery(this);var d=f.data("name");if(a.indexOf(d)<0){f.addClass("no").removeClass("sel")}else{f.removeClass("no")}})}};TopBar={version:20150425,defaultUrl:"/top/",$topbar:null,$icon_pagemenu:null,inited_pagemenu:false,pagemenu:null,init:function(){if(!AJS.$("top_bar")){return}var q=TopBar.$topbar=jQuery("#top_bar");var j=SiteState.getSessionUser();var b=SiteState.getPageUser();if(j){TopBar.updateNotificationCount(j.notifications_count);if(b){if(j.uid!=b.uid){PrivatePlurking.renderPrivatePlurk()}else{if(jQuery("body").hasClass("timeline")){jQuery("#page_title").click(function(r){TopBar.showProfile()}).css("cursor","pointer")}}}var a=jQuery("#nav-account");a.find("img:first").attr("src",Users.getUserImgSrc(j,"medium")).show(0);a.find("span:first").text(j.nick_name);var l=jQuery("#icon-pagemenu");if(l.length){this.$icon_pagemenu=l}}TopBar.initPageMenu();var h=jQuery("#navbar_search_kw");var m=h.find("i:first");var c=h.find("input:first");m.on("click",function(r){c.focus()});c.focus(function(){m.addClass("focus")});c.blur(function(){m.removeClass("focus")});if(!jQuery("#layout_content").hasClass("store-timeline")){var g=function(r){if(r){_gaq_push(["_trackEvent","portal_menu","visit_profile","total"]);window.open("/"+r.data("nick"))}};var f=new UserComplete(c[0],"","full",true,g,true,true);function d(t){var s=RegExp("www.plurk.com/w/?$|www.plurk.com/w[/#]+");if(s.exec(document.URL)){var r=jQuery("#search-form");r.find("#search-term").val(t);r.submit()}else{_gaq_push(["_trackEvent","portal_menu","search","total"]);_gaq_push(["_trackEvent","portal_menu","search",t]);if(t){t="#"+t}window.open("//www.plurk.com/w/"+t)}}var o=function(r){c.closest("a").click();var s=c.val().trim();c.val(s);if(s){d(s)}else{c.focus();return false}};c.keypress(function(r){if(r.keyCode==13){if(c.val()){o()}}})}TopBar.updateTitle();TopBar.initGA();q.find(".item").each(function(){var r=function(s,u){var t=new PopView({content:$menu,ex_class:"popMenu",offset:0,direction:"bottom",align:"left"});$item.click(function(){t.toggleFrom(s)});jQuery(u).find("a").mouseup(function(){if(jQuery(this).parents().attr("id")!=="language-selector"){t.hide()}});jQuery(u).find('a[href="/UserRecommend/"]').click(function(){TopBar.showNURecommendation();return false});jQuery(u).find('a[href="/Friends/suggestFriends/"]').click(function(){var v=new PopWindow({url:"/Friends/suggestFriends/",width:650,onClose:function(){location.reload(true)}});v.show();return false});jQuery(u).find('a[href="/Photos"]').click(function(){var v=new PopWindow({url:"/Photos/",width:"80%",height:"90%"});v.show();return false})};$item=jQuery(this);$menu=$item.find(".menu");if($menu.length){r($item[0],$menu[0])}})},initGA:function(){},initPageMenu:function(){var a=GLOBAL.page_user;if(!a){return}var c=jQuery("#icon-pagemenu");if(c.length==0){return}var d=a.nick_name;var b=a.display_name||d;c.html(b+' <span class="nick_name">@'+d+'</span><i class="pif-dropdown"></i>').click(function(){if(TopBar.pagemenu==null){TopBar.pagemenu=new InfoOverlay(a.id);TopBar.pagemenu.showFrom(this,{hover:false,onHide:function(){TopBar.pagemenu=null;TopBar.friendFanButton=null;FriendFanEditor.removeUpdatedEvent(f)}});if(a.has_block){var h=jQuery("<a></a>").addClass("pif-user-blocked friend_man icon_only has_block").css("background","#000").on("mouseenter",function(){jQuery(this).css("background","#692");HoverPopView(this,false,{content:_("Remove block"),ex_class:"popTooltip",direction:"top"})}).on("mouseleave",function(){jQuery(this).css("background","#000")}).click(function(){var j="/Friends/unblockUser?block_uid="+a.id;(new PopWindow({url:j,width:650,onLoad:function(){a.has_block=false}})).show();TopBar.pagemenu.hide()});jQuery(TopBar.pagemenu.view).find(".user_info").append(jQuery('<div class="friendfan"></div>').append(h))}else{var g=new FriendFanStatusButton(a,{icon_only:true});TopBar.friendFanButton=g;jQuery(g.friend_holder).click(function(){FriendFanEditor.switchFriendState(a)});jQuery(g.follow_holder).click(function(){FriendFanEditor.switchFollowState(a)});var f=FriendFanEditor.addUpdatedEvent(function(){g.updateState()});jQuery(TopBar.pagemenu.view).find(".user_info").append(jQuery('<div class="friendfan"></div>').append(g.friend_holder,g.follow_holder,g.fan_holder))}if(GLOBAL.page_user){if(jQuery("#layout_content").hasClass("store-timeline")){jQuery('<li class="pif-messages"></li>').html("前往訊息河道").click(function(){window.location="/"+a.nick_name}).appendTo(jQuery(TopBar.pagemenu.view).find(".menu"))}else{if(GLOBAL.page_user.solda_link&&GLOBAL.at_taiwan){jQuery('<li class="pif-store"></li>').html("前往噗打商店").click(function(){window.location="/store/"+a.nick_name}).appendTo(jQuery(TopBar.pagemenu.view).find(".menu"))}}}}})},noti_count:null,updateNotificationCountAJAX:function(){if(!SiteState.getSessionUser()){return false}var a=AJS.getRequest("/Notifications/getCount");a.addCallback(TopBar.updateNotificationCount);a.sendReq({})},showFriends:function(a){if(!AJS.isString(a)){a=""}return(function(){(new PopWindow({url:"/Friends/"+a,width:650})).show();return false})()},showPrivacy:function(){(new PopWindow({url:"/Settings/privacy",width:650})).show()},showMyAccount:function(a){(new PopWindow({url:a,width:650})).show()},showPremium:function(b,c){c=c||window;var a=c.LANG&&c.LANG.indexOf("zh_")!=-1;var d=(a)?"噗幣設定":"Plurk Coins";(new PopWindow({url:b,width:650})).show()},showMobile:function(){(new PopWindow({url:"/Settings/showMobile",width:650})).show()},showFBrelink:function(){(new PopWindow({url:"/FacebookApp/relink",width:550})).show()},showWEIBOrelink:function(){(new PopWindow({url:"/WeiboApp/relink",width:550})).show()},showNURecommendation:function(b){var a=new PopWindow({url:"/UserRecommend/"+(b?"?from_reg=true":""),width:650,height:"100%",onClose:function(){location.reload(true)}});a.show()},_updateFriends:function(){if(TopBar.update_friends){TopBar.update_friends=false;TimeLine.showLoading();var a=AJS.loadJSON("/Friends/get");a.addCallback(function(b){FRIENDS=b;buildFriendCollection(null,true);TimeLine.hideLoading();TopBar._updateTL();Profile.renderFriends();if(TimeLine.mode=="all"){TimeLine.user_ids=AJS.keys(FRIENDS);TimeLine.user_ids.push(SiteState.getPageUser().id)}});a.sendReq({})}},_updateTL:function(){if(TopBar.update_tl){TimeLine.reset();TimeLine.showLoading();TimeLine.getPlurks()}TopBar.update_tl=false},updateNotificationCount:function(b){var c="";var a=jQuery("#noti_count");var d=a.closest(".item");if(b>0){d.addClass("alert");c=""+b}else{d.removeClass("alert")}a.text(c)},showNotifications:function(){(new PopWindow({url:"/Notifications",width:670,onClose:function(){TopBar.updateNotificationCountAJAX(false);if(SiteState.canEdit()){TopBar._updateTL();TopBar._updateFriends()}}})).show()},showProfile:function(){if(SiteState.getSessionUser()){window.location="/"+SiteState.getSessionUser().nick_name}},showFrontPage:function(){window.location=TopBar.defaultUrl},updateTitle:function(){var a=GLOBAL.page_user;if(!a){return}var b=jQuery("#page_title");if(b.length==0){return}if(GLOBAL.session_user&&GLOBAL.session_user.id==GLOBAL.page_user.id){if(a.page_title){b.html(a.page_title.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}}else{b.empty()}if(window.Users){Users.updateTitle()}},showConfirmEmail:function(){(new PopWindow({url:"/Users/showConfirmEmail",width:650})).show()},goLogin:function(d){var a=location.protocol+"//"+location.hostname;var c=location.pathname;var b=RegExp("/(top)/?$");if(b.exec(c)){c="/"}d.href+=encodeURIComponent(a+c+location.search+location.hash)}};jQuery(document).ready(function(){TopBar.init()});function buildFriendCollection(c,a){c=c||window.COMPLETION;collection=[];if(c){if(window.SiteState){var b=SiteState.getSessionUser();c[b.id]=b}AJS.map(AJS.keys(c),function(d){var f=c[d];if(f.nick_name!="plurkbuddy"){var g=f.full_name!==""?f.full_name:f.nick_name;if(f.display_name&&f.display_name!=f.nick_name){g+=" ("+f.display_name+")"}g+=" <"+f.nick_name+">";collection.push(g)}})}if(a&&window.CLIQUES){AJS.map(CLIQUES,function(d){var f=CLIQUES_DEFAULT.indexOf(d.name);if(f>-1){collection.push(CLIQUES_DEFAULT_TRANS[f]+" <CLIQUE>")}else{collection.push(d.name+" <CLIQUE>")}})}collection.sort()}collectionIndex=new Array();AmiComplete={siw:null,inited:false,init:function(){if(!this.inited){AJS.AEV(document,"keydown",AmiComplete.handleKeyDown);AJS.AEV(document,"keyup",AmiComplete.handleKeyPress);AJS.AEV(document,"mouseup",AmiComplete.handleClick);AJS.AEV(document,"mousemove",AmiComplete.handleMouseOver);AJS.ACN(AJS.getBody(),AJS.DIV({id:"smartInputFloater",c:"floater"},AJS.TABLE(AJS.TBODY(AJS.TR(AJS.TD({id:"smartInputFloaterContent",nowrap:"nowrap"}))))))}this.inited=true},handleKeyPress:function(f){var d=AmiComplete.siw;var c=AJS.getEventElm(f);var a=isWithinNode(c,null,"wickEnabled",null,null);var b=f.keyCode;if(d&&((b==13)||(b==9)||(b==188)||(b==190))){d.selectingSomething=true;hideSmartInputFloater()}else{if(a&&(b!=38)&&(b!=40)&&(b!=37)&&(b!=39)&&(b!=13)&&(b!=27)){if(!d||(d&&!d.selectingSomething)){processSmartInput(a)}}}AJS.preventDefault(f);return false},handleKeyDown:function(h){var f=h.keyCode;var d=AmiComplete.siw;var c=AJS.getEventElm(h);var b=true;if(c&&AJS.hasClass(c,"wickEnabled")&&c.value==""&&f==8){var a=AJS.getParentBytc(c,"li");var g=a.previousSibling;if(g&&AJS.hasClass(g,"person")&&!AJS.hasClass(g,"persistent_token")){AJS.removeElement(g)}}if(d){if(f==40){d.selectingSomething=true;selectNextSmartInputMatchItem()}else{if(f==38){d.selectingSomething=true;selectPreviousSmartInputMatchItem()}else{if((f==13)||(f==9)||(f==188)||(f==190)){d.selectingSomething=true;activateCurrentSmartInputMatch()}else{if(f==27){hideSmartInputFloater();d.inputBox.value=""}else{d.selectingSomething=false;b=false}}}}}else{b=false}if(b){AJS.preventDefault(h);return false}},handleFocus:function(c){var b=AmiComplete.siw;var a=AJS.getEventElm(c);if(focEl=isWithinNode(a,null,"wickEnabled",null,null)){if(!b||(b&&!b.selectingSomething)){processSmartInput(focEl)}}},handleBlur:function(b){var a=AmiComplete.siw;if(a&&a.anchor_focus){return}eL=AJS.getEventElm(b);if(blurEl=isWithinNode(eL,null,"wickEnabled",null,null)){if(a&&!a.selectingSomething){hideSmartInputFloater()}}},handleClick:function(b){var a=AmiComplete.siw;if(a&&a.selectingSomething){selectFromMouseClick();if(a.inputBox.onadd){a.inputBox.onadd()}}},handleMouseOver:function(c){var b=AmiComplete.siw;var a=AJS.getEventElm(c);if(b&&(mEl=isWithinNode(a,null,"matchedSmartInputItem",null,null))){b.selectingSomething=true;selectFromMouseOver(mEl)}else{if(b){b.selectingSomething=false}}},createItem:function(h,f,a){var c=AmiComplete.siw;var b;var g=h;if(g.length>20){g=g.substring(0,20)+"..."}var d;if(!a){d=AJS.LI({c:"person token"},AJS.DIV(g,b=AJS.IMG({src:"//s.plurk.com/e53f5da063e999cd58ac4a3c6c8d3fe3.gif"})))}else{d=AJS.LI({c:"person token persistent_token"},AJS.DIV(g))}d.nick_name=f;d.full_name=h;if(!a){AJS.onEvent(d,"click",function(l){var m=AJS.getEventElm(l);var j=AJS.getNodeName(m)=="li"&&m||AJS.getParentBytc(m,"li");AJS.removeElement(j);if(c.inputBox.onadd){c.inputBox.onadd()}l.stopPropagation()})}return d}};function isWithinNode(g,b,j,a,f){var d=false;var h=g;while(h&&!d){if((h.id&&(h.id==b))||(h.className&&(h.className==b+"Class"))||(!a&&j&&h.className&&(h.className==j))||(!a&&j&&h.className&&(h.className.indexOf(j)!=-1))||(a&&h.tagName&&(h.tagName.toLowerCase()==a))||(f&&(h==f))){d=h}else{h=h.parentNode}}return h}function showSmartInputFloater(){var b=AmiComplete.siw;if(!b.floater.style.display||(b.floater.style.display=="none")){if(!b.customFloater){var c=AJS.absolutePosition(b.inputBox);var a=c.x;var d=c.y;AJS.setLeft(b.floater,a);AJS.setTop(b.floater,d+b.inputBox.offsetHeight+5)}b.floater.style.display="block";b.floater.style.visibility="visible"}}function hideSmartInputFloater(){var a=AmiComplete.siw;if(a){a.floater.style.display="none";a.floater.style.visibility="hidden";AmiComplete.siw=null}}function processSmartInput(b){var c=AmiComplete.siw;if(!c){c=AmiComplete.siw=new smartInputWindow()}c.inputBox=b;var g=b.className.split(" ");var a=null;for(i=0;(!a&&g[i]);i++){if(g[i].indexOf("wickEnabled")!=-1){a=g[i]}}if(a&&(a.indexOf(":")!=-1)){c.customFloater=true;var f=a.split(":")[1];c.floater=AJS.$(f);c.floaterContent=c.floater.getElementsByTagName("div")[0]}setSmartInputData();if(c.matchCollection&&(c.matchCollection.length>0)){selectSmartInputMatchItem(0)}var d=getSmartInputBoxContent();if(d){modifySmartInputBoxContent(d);showSmartInputFloater();if(!AJS.isIe()){setTimeout(focusCurrent,20)}}else{hideSmartInputFloater()}}function smartInputMatch(a,b){this.cleanValue=a;this.value=b;this.isSelected=false}function simplify(a){return a.replace(/^[ \s\f\t\n\r]+/,"").replace(/[ \s\f\t\n\r]+$/,"")}function getUserInputToMatch(d){var c=d;var b=d.split(",");if(b.length>0){c=b[b.length-1]}return c}function getUserInputBase(){var c=AmiComplete.siw;var d=c.inputBox.value;var b=d;if((lastComma=d.lastIndexOf(","))!=-1){b=b.replace(/^(.*\,[ \r\n\t\f\s]*).*$/i,"$1")}else{b=""}return b}function runMatchingLogic(h,d){var f=AmiComplete.siw;var h=simplify(h);var r=h.charAt(0).toLowerCase();if(r=='"'){r=(n=h.charAt(1))?n.toLowerCase():"z"}if(d){h=r}if(f){f.matchCollection=new Array()}var b=collection;if(f&&f.revisedCollection&&(f.revisedCollection.length>0)&&f.lastUserInput&&(h.indexOf(f.lastUserInput)==0)){b=f.revisedCollection}else{if(collectionIndex[h]&&(collectionIndex[h].length>0)){b=collectionIndex[h]}else{if(collectionIndex[r]&&(collectionIndex[r].length>0)){b=collectionIndex[r]}else{if(f&&(h.length==1)&&(!collectionIndex[r])){f.buildIndex=true}else{if(f){f.buildIndex=false}}}}}var s=new Array();var m=new RegExp('([ "><-]*)('+h+")","i");var c=new RegExp('([ "><-]+)('+h+")","i");var q=new RegExp('([ "}{-]*)('+h+")","gi");var o=new RegExp('([ "}{-]+)('+h+")","gi");for(var l=0,g=0;(l<b.length);l++){var u=((!d)&&(g<f.MAX_MATCHES));var t=b[l];var a=simplify(t);if(!d&&(a.indexOf(h)==0)){var h=h.replace(/\>/gi,"\\}").replace(/\< ?/gi,"\\{");var v=new RegExp("("+h+")","i");if(u){f.matchCollection[g]=new smartInputMatch(t,a.replace(/\>/gi,"}").replace(/\< ?/gi,"{").replace(v,"<b>$1</b>"))}s[g]=t;g++}else{if(a.match(m)||a.match(c)){if(!d&&u){f.matchCollection[g]=new smartInputMatch(t,a.replace(/\>/gi,"}").replace(/\</gi,"{").replace(q,"$1<b>$2</b>").replace(o,"$1<b>$2</b>"))}s[g]=t;g++}}}if(f){f.lastUserInput=h;f.revisedCollection=s.join(",").split(",");collectionIndex[h]=s.join(",").split(",")}if(d||f.buildIndex){collectionIndex[r]=s.join(",").split(",");if(f){f.buildIndex=false}}}function setSmartInputData(){var b=AmiComplete.siw;if(b){var c=b.inputBox.value;var c=getUserInputToMatch(c);var a=c.toLowerCase().replace(/[\r\n\t\f\s]+/gi," ").replace(/^ +/gi,"").replace(/ +$/gi,"").replace(/ +/gi," ").replace(/\\/gi,"").replace(/\[/gi,"").replace(/\(/gi,"").replace(/\./gi,".").replace(/\?/gi,"");if(a&&(a!="")&&(a!='"')){runMatchingLogic(a)}else{b.matchCollection=null}}}function getSmartInputBoxContent(){var d=AmiComplete.siw;var b=null;if(d&&d.matchCollection&&(d.matchCollection.length>0)){b="";for(i=0;i<d.matchCollection.length;i++){var h=d.matchCollection[i].isSelected;var c=h?" selectedSmartInputItem":"";var f=h?' id="wick_cur"':"";var g=d.matchCollection[i].value.replace(/\{ */gi,"<span>").replace(/\} */gi,"</span>");if(g.length>50){g=g.substring(0,50)+"..."}b+='<p class="matchedSmartInputItem'+c+'"><a href="javascript:;"'+f+">"+g+"</a></p>"}}if(d.matchCollection&&d.matchCollection.length==0){b='<p class="matchedSmartInputItem">No matches</p>'}return b}function modifySmartInputBoxContent(b){var a=AmiComplete.siw;a.floaterContent.innerHTML='<div id="smartInputResults">'+b+"</div>";a.matchListDisplay=AJS.$("smartInputResults")}function focusCurrent(){var a=AmiComplete.siw;if(!a){return}if(a.matchCollection.length<=6){return}var b=AJS.$("wick_cur");if(b){a.anchor_focus=true;b.focus();a.anchor_focus=false;a.inputBox.focus()}}function selectFromMouseOver(d){var c=AmiComplete.siw;var a=getCurrentlySelectedSmartInputItem();if(a!=null){deSelectSmartInputMatchItem(a)}var b=getIndexFromElement(d);selectSmartInputMatchItem(b);modifySmartInputBoxContent(getSmartInputBoxContent());focusCurrent()}function selectFromMouseClick(){var a=AmiComplete.siw;activateCurrentSmartInputMatch();a.inputBox.focus();hideSmartInputFloater()}function getIndexFromElement(b){var a=0;while(b=b.previousSibling){a++}return a}function getCurrentlySelectedSmartInputItem(){var a=AmiComplete.siw;var b=null;for(i=0;((i<a.matchCollection.length)&&!b);i++){if(a.matchCollection[i].isSelected){b=i}}return b}function selectSmartInputMatchItem(a){var b=AmiComplete.siw;b.matchCollection[a].isSelected=true}function deSelectSmartInputMatchItem(a){var b=AmiComplete.siw;b.matchCollection[a].isSelected=false}function selectNextSmartInputMatchItem(){var b=AmiComplete.siw;var a=getCurrentlySelectedSmartInputItem();if(a!=null){deSelectSmartInputMatchItem(a);if((a+1)<b.matchCollection.length){selectSmartInputMatchItem(a+1)}else{selectSmartInputMatchItem(0)}}else{selectSmartInputMatchItem(0)}modifySmartInputBoxContent(getSmartInputBoxContent());focusCurrent()}function selectPreviousSmartInputMatchItem(){var b=AmiComplete.siw;var a=getCurrentlySelectedSmartInputItem();if(a!=null){deSelectSmartInputMatchItem(a);if((a-1)>=0){selectSmartInputMatchItem(a-1)}else{selectSmartInputMatchItem(b.matchCollection.length-1)}}else{selectSmartInputMatchItem(b.matchCollection.length-1)}modifySmartInputBoxContent(getSmartInputBoxContent());focusCurrent()}function activateCurrentSmartInputMatch(){var d=AmiComplete.siw;var c=getUserInputBase();var b;if((b=getCurrentlySelectedSmartInputItem())!=null){var h=d.matchCollection[b].cleanValue;var g=h.match(/<(.+)>/,h)[1];var j=h.replace(/\s*<(.+)>/,"");h=h.replace(/\s*<.+>/,"");var f=AJS.$bytc("li","person",d.inputBox.parentNode.parentNode);var a=AJS.map(f,function(l){if(l.full_name==j){return true}});if(!a){AJS.insertBefore(AmiComplete.createItem(h,g),d.inputBox.parentNode)}d.inputBox.value="";runMatchingLogic(h,true);if(d.inputBox.onadd){d.inputBox.onadd()}}}function smartInputWindow(){this.customFloater=false;this.floater=AJS.$("smartInputFloater");this.floaterContent=AJS.$("smartInputFloaterContent");this.selectedSmartInputItem=null;this.MAX_MATCHES=25}function enableWick(a){a.setAttribute("autocomplete","OFF");AJS.AEV(a,"keypress",function(b){if(AJS.isIn(b.keyCode,[38,40])){AJS.preventDefault(b);return false}});AJS.AEV(a,"focus",AmiComplete.handleFocus);AJS.AEV(a,"blur",AmiComplete.handleBlur)}function createListHolder(d,c){var b;var a=AJS.DIV({c:"auto_ta",id:d},AJS.UL(AJS.LI({c:"token"},b=AJS.INPUT({c:"wickEnabled",type:"text",id:c}))));AJS.AEV(a,"click",function(){AJS.$(c).focus()});AJS.AEV(b,"keyup",function(g){var f=b.value.length;if(f>=5){AJS.setWidth(b,100)}else{if(f>=30){AJS.setWidth(b,200)}else{AJS.setWidth(b,30)}}});enableWick(b);return[a,b]}(function(a){PopViewCount=0;PopView=function(b){var c=a('<div class="popView"><div class="popViewContent"></div><div class="popViewArrow"><div></div></div></div>').css({display:"none"});a("body").append(c);this.view=c[0];this.options(b);this.count=PopViewCount++;this.shown=false;this.relayout_timer=null};PopView.prototype.options=function(d){var f=this;if(!f.ops){f.ops={direction:"top",keep:true}}for(var c in d){f.ops[c]=d[c]}d=f.ops;var g=a(f.view);if(d.content){g.children(".popViewContent").empty().append(d.content)}if(d.ex_class||d.ex_class===null){g.attr("class","popView");g.addClass(d.ex_class)}if(d.id){g.attr("id",d.id)}if(d.style){g.css(d.style)}if(d.hoverArea!==undefined){var b=g.find(".hover_area");if(d.hoverArea){if(b.length==0){a('<div style="position:absolute;z-index:-1;left:-10px;top:-10px;width:100%;height:100%;width:calc(100% + 20px);height:calc(100% + 20px);" class="hover_area"></div>').prependTo(g)}}else{if(b.length){b.remove()}}}f.layout()};PopView.prototype.toggleFrom=function(b){this.fromElm=b;if(a(this.view).is(":visible")){this.hide()}else{this.show()}};PopView.prototype.showFrom=function(b){this.fromElm=b;this.show()};PopView.prototype.show=function(){var b=this;setTimeout(function(){if(!a.contains(document,b.view)){a("body").append(b.view)}b.layout();var f=9000;a("body").children(".popView, .pop-window").each(function(){var g=parseInt(a(this).css("z-index"))||0;if(g>=f){f=g+1}});var d=a(b.view);d.css({display:"block","z-index":f});a(window).on("resize.popView"+b.count,function(){b.layout()});var c=false;a(document).on("mousedown.popView"+b.count,function(g){if(b.ops.closest&&a(g.target).closest(b.ops.closest).length){return}if(!d.is(g.target)&&d.has(g.target).length===0){c=true}});a(document).on("mouseup.popView"+b.count,function(g){if(b.ops.closest&&a(g.target).closest(b.ops.closest).length){return}if(c&&!d.is(g.target)&&d.has(g.target).length===0){b.hide()}});b.shown=true;if(b.ops.onShow){b.ops.onShow()}b.layout();if(b.ops.onresize){b.checkResize(d.width(),d.height())}})};PopView.prototype.layout=function(){if(!this.fromElm){return}var o=this;var m=a(o.view);var z=m.width();var l=m.height();var d=a(o.fromElm);var A=d.offset();var b=a("body").offset();A.left-=b.left;A.top-=b.top;var q=d.outerWidth();var f=d.outerHeight();var c=o.ops.direction;if(c=="top"){if(A.top-l<10){c="bottom"}}else{if(c=="left"){if(A.left-z<10){c="right"}}}var v;if(c=="top"){v="bottom"}else{if(c=="bottom"){v="top"}else{if(c=="left"){v="right"}else{if(c=="right"){v="left"}}}}var j=a(document).width();var t,r;var u={};var g=o.ops.offset?o.ops.offset+7:7;switch(c){case"top":case"bottom":r=c=="top"?A.top-l-g:A.top+f+g;t=o.ops.align=="left"?A.left-8:t=A.left+(q-z)*0.5;if(t<10){t=10}else{if(t+z>j-10){t=j-10-z}}u.left=o.ops.arrowAlign=="left"?10:A.left-t-8+(q*0.5);break;case"left":case"right":t=c=="left"?A.left-z-g:A.left+q+g;r=Math.max(A.top-l+f+8,20);u.bottom=f>l?10:l-(A.top-r+f*0.5+8);break}m.css({left:t,top:r});var s=m.find(".popViewArrow");s.css({"border-color":"",left:"",right:"",top:"",bottom:""}).css("border-"+c+"-color",m.css("border-"+v+"-color")).css(c,"100%").css(u);s.find("div").css({"border-color":"",left:"",right:"",top:"",bottom:""}).css("border-"+c+"-color",m.css("background-color")).css(c,"-7px").css(c=="top"||c=="bottom"?"left":"top","-5px")};PopView.prototype.checkResize=function(b,c){var d=this;d.relayout_timer=setTimeout(function(){var g=a(d.view);var f=g.width(),h=g.height();if(f!=b||h!=c){d.layout()}d.checkResize(f,h)},250)};PopView.prototype.hide=function(){var b=this;clearTimeout(b.relayout_timer);setTimeout(function(){a(b.view).css("display","none");a(window).off("resize.popView"+b.count);a(document).off("mousedown.popView"+b.count).off("mouseup.popView"+b.count);b.shown=false;if(b.ops.onHide){b.ops.onHide()}if(!b.ops.keep){b.remove()}})};PopView.prototype.remove=function(){a(this.view).remove()};HoverPopView=function(f,l,g){if(g.keep===undefined){g.keep=false}g.hoverArea=l;var b=new PopView(g);var j=a(b.view);var h=b.count;var d=g.onHide;b.options({onHide:function(){a(document).off("mousemove.hoverPopView"+h);if(d){d()}}});var c=a(f);a(document).on("mousemove.hoverPopView"+b.count,function(m){if(!c.is(m.target)&&!c.has(m.target).length&&(!l||(!j.is(m.target)&&!j.has(m.target).length))){b.hide()}});b.showFrom(f);return b};AddHoverToolTip=function(d,g,f){var c={content:g,ex_class:"popTooltip",direction:"top",offset:1};for(var b in f){c[b]=f[b]}a(d).off("mouseover.hovertooltip").on("mouseover.hovertooltip",function(){HoverPopView(this,false,c)})}})(jQuery);(function(a){if(top.PopWindow){PopWindow=top.PopWindow;return}PopWindow=function(b){this._init(b)};PopWindow.popWindows={};PopWindow.PopWindowCount=0;PopWindow.openLink=function(d,c){var b=a(d).attr("href");if(b){(new PopWindow(a.extend({url:b},c))).show()}return false};PopWindow.getPopWindowWithWindow=function(c){var b=null;a.each(PopWindow.popWindows,function(d,f){if(f.ops.url){var g=a(f.view).find(".pop-window-frame");if(g[0].contentWindow==c){b=f;return false}}});return b};PopWindow.prototype={_init:function(b){$overlay=a('<div class="pop-window-overlay"></div>');$view=a('<div class="pop-window"></div>').css({width:600,height:600});this.view=$view[0];this.overlay=$overlay[0];this.options(b);this.shown=false;this.count=PopWindow.PopWindowCount++},options:function(c){var f=this;if(!f.ops){f.ops={overlay_click_close:true}}for(var b in c){f.ops[b]=c[b]}$view=a(f.view);if(c.ex_class){$view.addClass(c.ex_class)}if(c.content){$view.empty().append(a('<div class="pop-window-content"></div>').append(c.content))}else{if(c.url){var g=a('<div class="pop-window-loading"><img src="//s.plurk.com/3dffb16b3316e8f28df661fdf3952dfc.gif"></div>');var d=a('<iframe class="pop-window-frame" frameborder="0">').css({opacity:0});$view.empty().append(g,d);d.on("load",function(){f.layout(true);d.animate({opacity:1},100);g.remove();try{d[0].contentWindow.SelfPopWindow=f}catch(h){}if(f.ops.onLoad){f.ops.onLoad()}});d.attr("src",c.url)}}f.layout(true)},show:function(){var b=this;setTimeout(function(){b.shown=true;PopWindow.popWindows[b.count]=b;var c=a("body");c.append(b.overlay,b.view);var d=a(window).scrollTop();a("html").css({"overflow-y":"scroll"});c.data("st",d).css({top:-d,overflow:"visible",position:"fixed"});b.layout();var f=9000;c.children(".popView, .pop-window").each(function(){var g=parseInt(a(this).css("z-index"))||0;if(g>=f){f=g+2}});$view=a(b.view);$view.css({display:"block","z-index":f});a(window).on("resize.popWindow"+b.count,function(){b.layout()});a(b.overlay).css({"z-index":f-1}).on("mouseup",function(g){if(b.ops.overlay_click_close){b.close()}});if(b.ops.onShow){b.ops.onShow()}b.layout()})},layout:function(c){var j=this;if(!j.shown){return}$view=a(j.view);var d=a(window).width(),b=a(window).height();var o=j.ops.width,g=j.ops.height;if(o&&o.indexOf&&o.indexOf("%")>-1){o=d*parseInt(o)*0.01}if(g&&g.indexOf&&g.indexOf("%")>-1){g=b*parseInt(g)*0.01}o=parseInt(o);g=parseInt(g);if(!o||!g){if(j.ops.content){if(!o){o=$view.find(".pop-window-content").outerWidth()}if(!g){g=$view.find(".pop-window-content").outerHeight()}}else{if(j.ops.url){if(!g){g=j.ops.contentHeight}}}}if(!o||o>d-80){o=(!o&&$view.width())||(d-80)}if(!g||g>b-80){g=(!g&&$view.height())||(b-80)}var m=(d-o)*0.5;var l=(b-g)*0.5;if(m==$view.position().left&&l==$view.position().top&&o==$view.width()&&g==$view.height()){return}var f={left:m,top:l,width:o,height:g};if(c){$view.stop().animate(f,150)}else{$view.css(f)}},close:function(){var b=this;if(b.relayout_timer){clearInterval(b.relayout_timer)}setTimeout(function(){delete PopWindow.popWindows[b.count];a(b.view).remove();a(b.overlay).remove();a(window).off("resize.popWindow"+b.count);a(document).off("mousedown.popWindow"+b.count).off("mouseup.popWindow"+b.count);b.shown=false;if(b.ops.onClose){b.ops.onClose()}if(b.ops.reloadOnClose){top.location.reload(true)}a("html").css({"overflow-y":""});a("body").css({overflow:"",position:"",top:0});a(window).scrollTop(a("body").data("st"))},20)}}})(jQuery);